{"remainingRequest":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Research\\research-ui\\src\\views\\project\\approval\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Research\\research-ui\\src\\views\\project\\approval\\index.vue","mtime":1740901135535},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1740793410952},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1740793415933}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbGlzdFBlbmRpbmdBcHByb3ZhbCwKICBsaXN0QXBwcm92ZWRBcHByb3ZhbCwKICBsaXN0QWxsQXBwcm92YWwsCiAgZ2V0QXBwcm92YWxEZXRhaWwsCiAgYXBwcm92ZSwKICByZWplY3QsCiAgcmV0dXJuQXBwcm92YWwKfSBmcm9tICJAL2FwaS9wcm9qZWN0L2FwcHJvdmFsIjsKaW1wb3J0IHsgZ2V0QXBwcm92YWxIaXN0b3J5LCBnZXRBcHByb3ZhbFN0ZXBzIH0gZnJvbSAiQC9hcGkvcHJvamVjdC9hcHByb3ZhbCI7CmltcG9ydCB7IGdldFVzZXJQcm9maWxlIH0gZnJvbSAiQC9hcGkvc3lzdGVtL3VzZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQcm9qZWN0QXBwcm92YWwiLAogIGRpY3RzOiBbJ2FwcHJvdmFsX3Jlc3VsdCcsICdhcHBseV9zdGF0dXMnLCAncHJvamVjdF90eXBlJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgYWxsTG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIGFwcHJvdmVkVG90YWw6IDAsCiAgICAgIGFsbFRvdGFsOiAwLAogICAgICAvLyDooajmoLzmlbDmja4KICAgICAgcGVuZGluZ0xpc3Q6IFtdLAogICAgICBhcHByb3ZlZExpc3Q6IFtdLAogICAgICBhbGxMaXN0OiBbXSwKICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgIHRpdGxlOiAiIiwKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICBhcHByb3ZhbE9wZW46IGZhbHNlLAogICAgICAvLyDmmK/lkKbkuLrnrqHnkIblkZgKICAgICAgaGFzQWRtaW5QZXJtaXNzaW9uOiBmYWxzZSwKICAgICAgLy8g5b2T5YmN5r+A5rS755qE6YCJ6aG55Y2hCiAgICAgIGFjdGl2ZVRhYjogJ3BlbmRpbmcnLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBwcm9qZWN0TmFtZTogbnVsbCwKICAgICAgICBhcHBseVRpdGxlOiBudWxsCiAgICAgIH0sCiAgICAgIGFwcHJvdmVkUXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBwcm9qZWN0TmFtZTogbnVsbCwKICAgICAgICBhcHBseVRpdGxlOiBudWxsLAogICAgICAgIGFwcHJvdmFsUmVzdWx0OiBudWxsCiAgICAgIH0sCiAgICAgIGFsbFF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgcHJvamVjdE5hbWU6IG51bGwsCiAgICAgICAgYXBwbHlUaXRsZTogbnVsbCwKICAgICAgICBzdGF0dXM6IG51bGwKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICAvLyDlrqHmibnooajljZXlj4LmlbAKICAgICAgYXBwcm92YWxGb3JtOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgYXBwbHlJZDogbnVsbCwKICAgICAgICBhcHBseVRpdGxlOiAnJywKICAgICAgICBhcHByb3ZhbFN0ZXA6ICcnLAogICAgICAgIGFwcHJvdmFsT3BpbmlvbjogJycsCiAgICAgICAgYXBwcm92YWxSZXN1bHQ6ICcxJwogICAgICB9LAogICAgICAvLyDlrqHmibnooajljZXmoKHpqowKICAgICAgYXBwcm92YWxSdWxlczogewogICAgICAgIGFwcHJvdmFsT3BpbmlvbjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWuoeaJueaEj+ingeS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBhcHByb3ZhbFJlc3VsdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeWuoeaJuee7k+aenCIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIC8vIOWuoeaJuea1geeoi+atpemqpAogICAgICBhcHByb3ZhbFN0ZXBzOiBbXSwKICAgICAgLy8g5b2T5YmN5r+A5rS755qE5q2l6aqkCiAgICAgIGFjdGl2ZVN0ZXA6IDAsCiAgICAgIC8vIOa1geeoi+eKtuaAgQogICAgICBwcm9jZXNzU3RhdHVzOiAncHJvY2VzcycsCiAgICAgIC8vIOWuoeaJueWOhuWPsgogICAgICBhcHByb3ZhbEhpc3Rvcnk6IFtdLAogICAgICAvLyDmmK/lkKblj6/ku6XpgIDlm54KICAgICAgY2FuUmV0dXJuOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuY2hlY2tBZG1pblBlcm1pc3Npb24oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOajgOafpeaYr+WQpuacieeuoeeQhuWRmOadg+mZkAogICAgY2hlY2tBZG1pblBlcm1pc3Npb24oKSB7CiAgICAgIGdldFVzZXJQcm9maWxlKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgeyByb2xlcyB9ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLmhhc0FkbWluUGVybWlzc2lvbiA9IHJvbGVzLnNvbWUocm9sZSA9PiByb2xlLnJvbGVLZXkgPT09ICdhZG1pbicpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpgInpobnljaHliIfmjaIKICAgIGhhbmRsZVRhYkNsaWNrKHRhYikgewogICAgICBpZiAodGFiLm5hbWUgPT09ICdwZW5kaW5nJykgewogICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICB9IGVsc2UgaWYgKHRhYi5uYW1lID09PSAnYXBwcm92ZWQnKSB7CiAgICAgICAgdGhpcy5nZXRBcHByb3ZlZExpc3QoKTsKICAgICAgfSBlbHNlIGlmICh0YWIubmFtZSA9PT0gJ2FsbCcgJiYgdGhpcy5oYXNBZG1pblBlcm1pc3Npb24pIHsKICAgICAgICB0aGlzLmdldEFsbExpc3QoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKTsKICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoICE9PSAxOwogICAgICB0aGlzLm11bHRpcGxlID0gIXNlbGVjdGlvbi5sZW5ndGg7CiAgICB9LAogICAgLy8g5p+l6K+i5b6F5oiR5a6h5om55YiX6KGoCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0UGVuZGluZ0FwcHJvdmFsKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucGVuZGluZ0xpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5p+l6K+i5oiR5bey5a6h5om55YiX6KGoCiAgICBnZXRBcHByb3ZlZExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3RBcHByb3ZlZEFwcHJvdmFsKHRoaXMuYXBwcm92ZWRRdWVyeVBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5hcHByb3ZlZExpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIHRoaXMuYXBwcm92ZWRUb3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmn6Xor6Llhajpg6jlrqHmibnliJfooagKICAgIGdldEFsbExpc3QoKSB7CiAgICAgIHRoaXMuYWxsTG9hZGluZyA9IHRydWU7CiAgICAgIGxpc3RBbGxBcHByb3ZhbCh0aGlzLmFsbFF1ZXJ5UGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmFsbExpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIHRoaXMuYWxsVG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICB0aGlzLmFsbExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5b6F5oiR5a6h5om5IC0g5pCc57Si5oyJ6ZKu5pON5L2cCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSAncGVuZGluZycpIHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2FwcHJvdmVkJykgewogICAgICAgIHRoaXMuZ2V0QXBwcm92ZWRMaXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlhajpg6jlrqHmibkgLSDmkJzntKLmjInpkq7mk43kvZwKICAgIGhhbmRsZUFsbFF1ZXJ5KCkgewogICAgICB0aGlzLmFsbFF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLmdldEFsbExpc3QoKTsKICAgIH0sCiAgICAvLyDlvoXmiJHlrqHmibkgLSDph43nva7mjInpkq7mk43kvZwKICAgIHJlc2V0UXVlcnkoKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ3BlbmRpbmcnKSB7CiAgICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybSIpOwogICAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2FwcHJvdmVkJykgewogICAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm1BcHByb3ZlZCIpOwogICAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWFqOmDqOWuoeaJuSAtIOmHjee9ruaMiemSruaTjeS9nAogICAgcmVzZXRBbGxRdWVyeSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oInF1ZXJ5Rm9ybUFsbCIpOwogICAgICB0aGlzLmhhbmRsZUFsbFF1ZXJ5KCk7CiAgICB9LAogICAgLy8g5p+l55yL6K+m5oOFCiAgICBoYW5kbGVWaWV3KHJvdykgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAi5a6h5om56K+m5oOFIjsKICAgICAgZ2V0QXBwcm92YWxEZXRhaWwocm93LmFwcGx5SWQgfHwgcm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgIC8vIOiOt+WPluWuoeaJuea1geeoi+S/oeaBrwogICAgICAgIHRoaXMuZ2V0QXBwcm92YWxTdGVwcyh0aGlzLmZvcm0uYXBwbHlJZCB8fCB0aGlzLmZvcm0uaWQpOwogICAgICAgIC8vIOiOt+WPluWuoeaJueWOhuWPsgogICAgICAgIHRoaXMuZ2V0QXBwcm92YWxIaXN0b3J5KHRoaXMuZm9ybS5hcHBseUlkIHx8IHRoaXMuZm9ybS5pZCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluWuoeaJuea1geeoi+atpemqpAogICAgZ2V0QXBwcm92YWxTdGVwcyhhcHBseUlkKSB7CiAgICAgIGdldEFwcHJvdmFsU3RlcHMoYXBwbHlJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5hcHByb3ZhbFN0ZXBzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyDorqHnrpflvZPliY3mv4DmtLvnmoTmraXpqqQKICAgICAgICB0aGlzLmNhbGN1bGF0ZUFjdGl2ZVN0ZXAoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5a6h5om55Y6G5Y+yCiAgICBnZXRBcHByb3ZhbEhpc3RvcnkoYXBwbHlJZCkgewogICAgICBnZXRBcHByb3ZhbEhpc3RvcnkoYXBwbHlJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5hcHByb3ZhbEhpc3RvcnkgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDorqHnrpflvZPliY3mv4DmtLvnmoTmraXpqqQKICAgIGNhbGN1bGF0ZUFjdGl2ZVN0ZXAoKSB7CiAgICAgIGlmICghdGhpcy5hcHByb3ZhbFN0ZXBzIHx8ICF0aGlzLmFwcHJvdmFsU3RlcHMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5hY3RpdmVTdGVwID0gMDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOagueaNrueKtuaAgeWSjOW9k+WJjeatpemqpOiuoeeul2FjdGl2ZVN0ZXAKICAgICAgaWYgKHRoaXMuZm9ybS5zdGF0dXMgPT09ICczJykgeyAvLyDlt7LpgJrov4cKICAgICAgICB0aGlzLmFjdGl2ZVN0ZXAgPSB0aGlzLmFwcHJvdmFsU3RlcHMubGVuZ3RoOwogICAgICAgIHRoaXMucHJvY2Vzc1N0YXR1cyA9ICdzdWNjZXNzJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmZvcm0uc3RhdHVzID09PSAnNCcpIHsgLy8g5bey6amz5ZueCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFwcHJvdmFsU3RlcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmFwcHJvdmFsU3RlcHNbaV0uc3RlcEtleSA9PT0gdGhpcy5mb3JtLmN1cnJlbnRTdGVwKSB7CiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RlcCA9IGk7CiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXR1cyA9ICdlcnJvcic7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsgLy8g5a6h5om55LitCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFwcHJvdmFsU3RlcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmFwcHJvdmFsU3RlcHNbaV0uc3RlcEtleSA9PT0gdGhpcy5mb3JtLmN1cnJlbnRTdGVwKSB7CiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RlcCA9IGk7CiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXR1cyA9ICdwcm9jZXNzJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W5q2l6aqk5o+P6L+wCiAgICBnZXRTdGVwRGVzY3JpcHRpb24oc3RlcCkgewogICAgICBpZiAoc3RlcC5hcHByb3ZhbFVzZXJOYW1lKSB7CiAgICAgICAgcmV0dXJuIGAke3N0ZXAuYXBwcm92YWxVc2VyTmFtZX0gJHtzdGVwLmFwcHJvdmFsVGltZSB8fCAnJ31gOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICAvLyDojrflj5bml7bpl7Tnur/pobnnsbvlnosKICAgIGdldFRpbWVsaW5lSXRlbVR5cGUocmVzdWx0KSB7CiAgICAgIGNvbnN0IHJlc3VsdE1hcCA9IHsKICAgICAgICAnMSc6ICdzdWNjZXNzJywgICAvLyDpgJrov4cKICAgICAgICAnMic6ICdkYW5nZXInLCAgICAvLyDpqbPlm54KICAgICAgICAnMyc6ICd3YXJuaW5nJyAgICAvLyDpgIDlm54KICAgICAgfTsKICAgICAgcmV0dXJuIHJlc3VsdE1hcFtyZXN1bHRdIHx8ICdpbmZvJzsKICAgIH0sCiAgICAvLyDojrflj5bml7bpl7Tnur/pobnpopzoibIKICAgIGdldFRpbWVsaW5lSXRlbUNvbG9yKHJlc3VsdCkgewogICAgICBjb25zdCBjb2xvck1hcCA9IHsKICAgICAgICAnMSc6ICcjNjdDMjNBJywgICAvLyDpgJrov4cKICAgICAgICAnMic6ICcjRjU2QzZDJywgICAvLyDpqbPlm54KICAgICAgICAnMyc6ICcjRTZBMjNDJyAgICAvLyDpgIDlm54KICAgICAgfTsKICAgICAgcmV0dXJuIGNvbG9yTWFwW3Jlc3VsdF0gfHwgJyM5MDkzOTknOwogICAgfSwKICAgIC8vIOWuoeaJueaTjeS9nAogICAgaGFuZGxlQXBwcm92YWwocm93KSB7CiAgICAgIHRoaXMucmVzZXRBcHByb3ZhbEZvcm0oKTsKICAgICAgdGhpcy5hcHByb3ZhbE9wZW4gPSB0cnVlOwogICAgICB0aGlzLmFwcHJvdmFsRm9ybS5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy5hcHByb3ZhbEZvcm0uYXBwbHlJZCA9IHJvdy5hcHBseUlkOwogICAgICB0aGlzLmFwcHJvdmFsRm9ybS5hcHBseVRpdGxlID0gcm93LmFwcGx5VGl0bGU7CiAgICAgIHRoaXMuYXBwcm92YWxGb3JtLmFwcHJvdmFsU3RlcCA9IHJvdy5hcHByb3ZhbFN0ZXA7CgogICAgICAvLyDmo4Dmn6XmmK/lkKblj6/ku6XpgIDlm54KICAgICAgZ2V0QXBwcm92YWxIaXN0b3J5KHJvdy5hcHBseUlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCBoaXN0b3J5ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyDlpoLmnpzmnInlrqHmibnljoblj7LvvIzliJnlj6/ku6XpgIDlm54KICAgICAgICB0aGlzLmNhblJldHVybiA9IGhpc3RvcnkgJiYgaGlzdG9yeS5sZW5ndGggPiAwOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDph43nva7ooajljZUKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7fTsKICAgICAgdGhpcy5hcHByb3ZhbFN0ZXBzID0gW107CiAgICAgIHRoaXMuYWN0aXZlU3RlcCA9IDA7CiAgICAgIHRoaXMucHJvY2Vzc1N0YXR1cyA9ICdwcm9jZXNzJzsKICAgICAgdGhpcy5hcHByb3ZhbEhpc3RvcnkgPSBbXTsKICAgIH0sCiAgICAvLyDph43nva7lrqHmibnooajljZUKICAgIHJlc2V0QXBwcm92YWxGb3JtKCkgewogICAgICB0aGlzLmFwcHJvdmFsRm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBhcHBseUlkOiBudWxsLAogICAgICAgIGFwcGx5VGl0bGU6ICcnLAogICAgICAgIGFwcHJvdmFsU3RlcDogJycsCiAgICAgICAgYXBwcm92YWxPcGluaW9uOiAnJywKICAgICAgICBhcHByb3ZhbFJlc3VsdDogJzEnCiAgICAgIH07CiAgICAgIHRoaXMuY2FuUmV0dXJuID0gZmFsc2U7CiAgICB9LAogICAgLy8g5o+Q5Lqk5a6h5om5CiAgICBzdWJtaXRBcHByb3ZhbCgpIHsKICAgICAgdGhpcy4kcmVmc1siYXBwcm92YWxGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuYXBwcm92YWxGb3JtLmFwcHJvdmFsUmVzdWx0ID09PSAnMScpIHsKICAgICAgICAgICAgLy8g6YCa6L+HCiAgICAgICAgICAgIGFwcHJvdmUodGhpcy5hcHByb3ZhbEZvcm0uaWQsIHRoaXMuYXBwcm92YWxGb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKCLlrqHmibnlt7LpgJrov4ciKTsKICAgICAgICAgICAgICB0aGlzLmFwcHJvdmFsT3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcHByb3ZhbEZvcm0uYXBwcm92YWxSZXN1bHQgPT09ICcyJykgewogICAgICAgICAgICAvLyDpqbPlm54KICAgICAgICAgICAgcmVqZWN0KHRoaXMuYXBwcm92YWxGb3JtLmlkLCB0aGlzLmFwcHJvdmFsRm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5a6h5om55bey6amz5ZueIik7CiAgICAgICAgICAgICAgdGhpcy5hcHByb3ZhbE9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXBwcm92YWxGb3JtLmFwcHJvdmFsUmVzdWx0ID09PSAnMycpIHsKICAgICAgICAgICAgLy8g6YCA5ZueCiAgICAgICAgICAgIHJldHVybkFwcHJvdmFsKHRoaXMuYXBwcm92YWxGb3JtLmlkLCB0aGlzLmFwcHJvdmFsRm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5a6h5om55bey6YCA5ZueIik7CiAgICAgICAgICAgICAgdGhpcy5hcHByb3ZhbE9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project/approval","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-tabs v-model=\"activeTab\" @tab-click=\"handleTabClick\">\n      <el-tab-pane label=\"待我审批\" name=\"pending\">\n        <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"项目名称\" prop=\"projectName\">\n            <el-input\n              v-model=\"queryParams.projectName\"\n              placeholder=\"请输入项目名称\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"申请标题\" prop=\"applyTitle\">\n            <el-input\n              v-model=\"queryParams.applyTitle\"\n              placeholder=\"请输入申请标题\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-table v-loading=\"loading\" :data=\"pendingList\" @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n          <el-table-column label=\"申请编号\" align=\"center\" prop=\"applyCode\" width=\"120\" />\n          <el-table-column label=\"项目名称\" align=\"center\" prop=\"projectName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请标题\" align=\"center\" prop=\"applyTitle\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请人\" align=\"center\" prop=\"applyUserName\" width=\"100\" />\n          <el-table-column label=\"申请部门\" align=\"center\" prop=\"applyDeptName\" width=\"120\" />\n          <el-table-column label=\"申请时间\" align=\"center\" prop=\"applyTime\" width=\"160\" />\n          <el-table-column label=\"当前环节\" align=\"center\" prop=\"approvalStep\" width=\"120\" />\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-view\"\n                @click=\"handleView(scope.row)\"\n              >查看</el-button>\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-check\"\n                @click=\"handleApproval(scope.row)\"\n                v-hasPermi=\"['project:approval:approve']\"\n              >审批</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"total > 0\"\n          :total=\"total\"\n          :page.sync=\"queryParams.pageNum\"\n          :limit.sync=\"queryParams.pageSize\"\n          @pagination=\"getList\"\n        />\n      </el-tab-pane>\n\n      <el-tab-pane label=\"我已审批\" name=\"approved\">\n        <el-form :model=\"queryParams\" ref=\"queryFormApproved\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"项目名称\" prop=\"projectName\">\n            <el-input\n              v-model=\"queryParams.projectName\"\n              placeholder=\"请输入项目名称\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"申请标题\" prop=\"applyTitle\">\n            <el-input\n              v-model=\"queryParams.applyTitle\"\n              placeholder=\"请输入申请标题\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"审批结果\" prop=\"approvalResult\">\n            <el-select v-model=\"queryParams.approvalResult\" placeholder=\"请选择审批结果\" clearable size=\"small\">\n              <el-option\n                v-for=\"dict in dict.type.approval_result\"\n                :key=\"dict.value\"\n                :label=\"dict.label\"\n                :value=\"dict.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-table v-loading=\"loading\" :data=\"approvedList\">\n          <el-table-column label=\"申请编号\" align=\"center\" prop=\"applyCode\" width=\"120\" />\n          <el-table-column label=\"项目名称\" align=\"center\" prop=\"projectName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请标题\" align=\"center\" prop=\"applyTitle\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请人\" align=\"center\" prop=\"applyUserName\" width=\"100\" />\n          <el-table-column label=\"审批环节\" align=\"center\" prop=\"approvalStep\" width=\"120\" />\n          <el-table-column label=\"审批时间\" align=\"center\" prop=\"approvalTime\" width=\"160\" />\n          <el-table-column label=\"审批结果\" align=\"center\" prop=\"approvalResult\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.approval_result\" :value=\"scope.row.approvalResult\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-view\"\n                @click=\"handleView(scope.row)\"\n              >查看</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"approvedTotal > 0\"\n          :total=\"approvedTotal\"\n          :page.sync=\"approvedQueryParams.pageNum\"\n          :limit.sync=\"approvedQueryParams.pageSize\"\n          @pagination=\"getApprovedList\"\n        />\n      </el-tab-pane>\n\n      <el-tab-pane label=\"全部审批\" name=\"all\" v-if=\"hasAdminPermission\">\n        <el-form :model=\"allQueryParams\" ref=\"queryFormAll\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n          <el-form-item label=\"项目名称\" prop=\"projectName\">\n            <el-input\n              v-model=\"allQueryParams.projectName\"\n              placeholder=\"请输入项目名称\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleAllQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"申请标题\" prop=\"applyTitle\">\n            <el-input\n              v-model=\"allQueryParams.applyTitle\"\n              placeholder=\"请输入申请标题\"\n              clearable\n              size=\"small\"\n              @keyup.enter.native=\"handleAllQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"审批状态\" prop=\"status\">\n            <el-select v-model=\"allQueryParams.status\" placeholder=\"请选择审批状态\" clearable size=\"small\">\n              <el-option\n                v-for=\"dict in dict.type.apply_status\"\n                :key=\"dict.value\"\n                :label=\"dict.label\"\n                :value=\"dict.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleAllQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetAllQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-table v-loading=\"allLoading\" :data=\"allList\">\n          <el-table-column label=\"申请编号\" align=\"center\" prop=\"applyCode\" width=\"120\" />\n          <el-table-column label=\"项目名称\" align=\"center\" prop=\"projectName\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请标题\" align=\"center\" prop=\"applyTitle\" :show-overflow-tooltip=\"true\" />\n          <el-table-column label=\"申请人\" align=\"center\" prop=\"applyUserName\" width=\"100\" />\n          <el-table-column label=\"申请部门\" align=\"center\" prop=\"applyDeptName\" width=\"120\" />\n          <el-table-column label=\"申请时间\" align=\"center\" prop=\"applyTime\" width=\"160\" />\n          <el-table-column label=\"当前环节\" align=\"center\" prop=\"currentStep\" width=\"120\" />\n          <el-table-column label=\"审批状态\" align=\"center\" prop=\"status\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <dict-tag :options=\"dict.type.apply_status\" :value=\"scope.row.status\"/>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                icon=\"el-icon-view\"\n                @click=\"handleView(scope.row)\"\n              >查看</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <pagination\n          v-show=\"allTotal > 0\"\n          :total=\"allTotal\"\n          :page.sync=\"allQueryParams.pageNum\"\n          :limit.sync=\"allQueryParams.pageSize\"\n          @pagination=\"getAllList\"\n        />\n      </el-tab-pane>\n    </el-tabs>\n\n    <!-- 查看对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"900px\" append-to-body>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-card class=\"box-card\">\n            <div slot=\"header\" class=\"clearfix\">\n              <span>申请信息</span>\n            </div>\n            <el-descriptions :column=\"3\" border>\n              <el-descriptions-item label=\"申请编号\">{{ form.applyCode }}</el-descriptions-item>\n              <el-descriptions-item label=\"项目名称\">{{ form.projectName }}</el-descriptions-item>\n              <el-descriptions-item label=\"项目类型\">\n                <dict-tag :options=\"dict.type.project_type\" :value=\"form.projectType\"/>\n              </el-descriptions-item>\n              <el-descriptions-item label=\"申请标题\">{{ form.applyTitle }}</el-descriptions-item>\n              <el-descriptions-item label=\"申请人\">{{ form.applyUserName }}</el-descriptions-item>\n              <el-descriptions-item label=\"申请部门\">{{ form.applyDeptName }}</el-descriptions-item>\n              <el-descriptions-item label=\"申请时间\">{{ form.applyTime }}</el-descriptions-item>\n              <el-descriptions-item label=\"审批状态\">\n                <dict-tag :options=\"dict.type.apply_status\" :value=\"form.status\"/>\n              </el-descriptions-item>\n              <el-descriptions-item label=\"当前环节\">{{ form.currentStep }}</el-descriptions-item>\n            </el-descriptions>\n\n            <div class=\"mt20\">\n              <el-divider content-position=\"left\">申请内容</el-divider>\n              <div class=\"apply-content\" v-html=\"form.applyContent\"></div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"mt20\">\n        <el-col :span=\"24\">\n          <el-card class=\"box-card\">\n            <div slot=\"header\" class=\"clearfix\">\n              <span>审批流程</span>\n            </div>\n            <el-steps :active=\"activeStep\" :process-status=\"processStatus\" finish-status=\"success\" align-center>\n              <el-step\n                v-for=\"(step, index) in approvalSteps\"\n                :key=\"index\"\n                :title=\"step.stepName\"\n                :description=\"getStepDescription(step)\"\n              ></el-step>\n            </el-steps>\n\n            <el-timeline class=\"mt20\">\n              <el-timeline-item\n                v-for=\"(history, index) in approvalHistory\"\n                :key=\"index\"\n                :timestamp=\"history.approvalTime\"\n                :type=\"getTimelineItemType(history.approvalResult)\"\n                :color=\"getTimelineItemColor(history.approvalResult)\"\n              >\n                <el-card class=\"timeline-card\">\n                  <div class=\"timeline-title\">\n                    <span>{{ history.approvalStep }}</span>\n                    <span style=\"float: right;\">\n                      <dict-tag :options=\"dict.type.approval_result\" :value=\"history.approvalResult\"/>\n                    </span>\n                  </div>\n                  <div class=\"timeline-content\">\n                    <p><strong>审批人：</strong>{{ history.approvalUserName }}</p>\n                    <p><strong>审批意见：</strong>{{ history.approvalOpinion || '无' }}</p>\n                  </div>\n                </el-card>\n              </el-timeline-item>\n            </el-timeline>\n          </el-card>\n        </el-col>\n      </el-row>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"open = false\">关 闭</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 审批对话框 -->\n    <el-dialog title=\"审批处理\" :visible.sync=\"approvalOpen\" width=\"500px\" append-to-body>\n      <el-form ref=\"approvalForm\" :model=\"approvalForm\" :rules=\"approvalRules\" label-width=\"100px\">\n        <el-form-item label=\"申请标题\">\n          <el-input v-model=\"approvalForm.applyTitle\" disabled />\n        </el-form-item>\n        <el-form-item label=\"审批环节\">\n          <el-input v-model=\"approvalForm.approvalStep\" disabled />\n        </el-form-item>\n        <el-form-item label=\"审批意见\" prop=\"approvalOpinion\">\n          <el-input type=\"textarea\" v-model=\"approvalForm.approvalOpinion\" :rows=\"4\" placeholder=\"请输入审批意见\" />\n        </el-form-item>\n        <el-form-item label=\"审批结果\" prop=\"approvalResult\">\n          <el-radio-group v-model=\"approvalForm.approvalResult\">\n            <el-radio label=\"1\">通过</el-radio>\n            <el-radio label=\"2\">驳回</el-radio>\n            <el-radio label=\"3\" v-if=\"canReturn\">退回</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitApproval\">确 定</el-button>\n        <el-button @click=\"approvalOpen = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  listPendingApproval,\n  listApprovedApproval,\n  listAllApproval,\n  getApprovalDetail,\n  approve,\n  reject,\n  returnApproval\n} from \"@/api/project/approval\";\nimport { getApprovalHistory, getApprovalSteps } from \"@/api/project/approval\";\nimport { getUserProfile } from \"@/api/system/user\";\n\nexport default {\n  name: \"ProjectApproval\",\n  dicts: ['approval_result', 'apply_status', 'project_type'],\n  data() {\n    return {\n      // 遮罩层\n      loading: false,\n      allLoading: false,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      approvedTotal: 0,\n      allTotal: 0,\n      // 表格数据\n      pendingList: [],\n      approvedList: [],\n      allList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      approvalOpen: false,\n      // 是否为管理员\n      hasAdminPermission: false,\n      // 当前激活的选项卡\n      activeTab: 'pending',\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        projectName: null,\n        applyTitle: null\n      },\n      approvedQueryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        projectName: null,\n        applyTitle: null,\n        approvalResult: null\n      },\n      allQueryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        projectName: null,\n        applyTitle: null,\n        status: null\n      },\n      // 表单参数\n      form: {},\n      // 审批表单参数\n      approvalForm: {\n        id: null,\n        applyId: null,\n        applyTitle: '',\n        approvalStep: '',\n        approvalOpinion: '',\n        approvalResult: '1'\n      },\n      // 审批表单校验\n      approvalRules: {\n        approvalOpinion: [\n          { required: true, message: \"审批意见不能为空\", trigger: \"blur\" }\n        ],\n        approvalResult: [\n          { required: true, message: \"请选择审批结果\", trigger: \"change\" }\n        ]\n      },\n      // 审批流程步骤\n      approvalSteps: [],\n      // 当前激活的步骤\n      activeStep: 0,\n      // 流程状态\n      processStatus: 'process',\n      // 审批历史\n      approvalHistory: [],\n      // 是否可以退回\n      canReturn: false\n    };\n  },\n  created() {\n    this.getList();\n    this.checkAdminPermission();\n  },\n  methods: {\n    // 检查是否有管理员权限\n    checkAdminPermission() {\n      getUserProfile().then(response => {\n        const { roles } = response.data;\n        this.hasAdminPermission = roles.some(role => role.roleKey === 'admin');\n      });\n    },\n    // 选项卡切换\n    handleTabClick(tab) {\n      if (tab.name === 'pending') {\n        this.getList();\n      } else if (tab.name === 'approved') {\n        this.getApprovedList();\n      } else if (tab.name === 'all' && this.hasAdminPermission) {\n        this.getAllList();\n      }\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id);\n      this.single = selection.length !== 1;\n      this.multiple = !selection.length;\n    },\n    // 查询待我审批列表\n    getList() {\n      this.loading = true;\n      listPendingApproval(this.queryParams).then(response => {\n        this.pendingList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n    },\n    // 查询我已审批列表\n    getApprovedList() {\n      this.loading = true;\n      listApprovedApproval(this.approvedQueryParams).then(response => {\n        this.approvedList = response.rows;\n        this.approvedTotal = response.total;\n        this.loading = false;\n      });\n    },\n    // 查询全部审批列表\n    getAllList() {\n      this.allLoading = true;\n      listAllApproval(this.allQueryParams).then(response => {\n        this.allList = response.rows;\n        this.allTotal = response.total;\n        this.allLoading = false;\n      });\n    },\n    // 待我审批 - 搜索按钮操作\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      if (this.activeTab === 'pending') {\n        this.getList();\n      } else if (this.activeTab === 'approved') {\n        this.getApprovedList();\n      }\n    },\n    // 全部审批 - 搜索按钮操作\n    handleAllQuery() {\n      this.allQueryParams.pageNum = 1;\n      this.getAllList();\n    },\n    // 待我审批 - 重置按钮操作\n    resetQuery() {\n      if (this.activeTab === 'pending') {\n        this.resetForm(\"queryForm\");\n        this.handleQuery();\n      } else if (this.activeTab === 'approved') {\n        this.resetForm(\"queryFormApproved\");\n        this.handleQuery();\n      }\n    },\n    // 全部审批 - 重置按钮操作\n    resetAllQuery() {\n      this.resetForm(\"queryFormAll\");\n      this.handleAllQuery();\n    },\n    // 查看详情\n    handleView(row) {\n      this.reset();\n      this.open = true;\n      this.title = \"审批详情\";\n      getApprovalDetail(row.applyId || row.id).then(response => {\n        this.form = response.data;\n        // 获取审批流程信息\n        this.getApprovalSteps(this.form.applyId || this.form.id);\n        // 获取审批历史\n        this.getApprovalHistory(this.form.applyId || this.form.id);\n      });\n    },\n    // 获取审批流程步骤\n    getApprovalSteps(applyId) {\n      getApprovalSteps(applyId).then(response => {\n        this.approvalSteps = response.data;\n        // 计算当前激活的步骤\n        this.calculateActiveStep();\n      });\n    },\n    // 获取审批历史\n    getApprovalHistory(applyId) {\n      getApprovalHistory(applyId).then(response => {\n        this.approvalHistory = response.data;\n      });\n    },\n    // 计算当前激活的步骤\n    calculateActiveStep() {\n      if (!this.approvalSteps || !this.approvalSteps.length) {\n        this.activeStep = 0;\n        return;\n      }\n\n      // 根据状态和当前步骤计算activeStep\n      if (this.form.status === '3') { // 已通过\n        this.activeStep = this.approvalSteps.length;\n        this.processStatus = 'success';\n      } else if (this.form.status === '4') { // 已驳回\n        for (let i = 0; i < this.approvalSteps.length; i++) {\n          if (this.approvalSteps[i].stepKey === this.form.currentStep) {\n            this.activeStep = i;\n            this.processStatus = 'error';\n            break;\n          }\n        }\n      } else { // 审批中\n        for (let i = 0; i < this.approvalSteps.length; i++) {\n          if (this.approvalSteps[i].stepKey === this.form.currentStep) {\n            this.activeStep = i;\n            this.processStatus = 'process';\n            break;\n          }\n        }\n      }\n    },\n    // 获取步骤描述\n    getStepDescription(step) {\n      if (step.approvalUserName) {\n        return `${step.approvalUserName} ${step.approvalTime || ''}`;\n      }\n      return '';\n    },\n    // 获取时间线项类型\n    getTimelineItemType(result) {\n      const resultMap = {\n        '1': 'success',   // 通过\n        '2': 'danger',    // 驳回\n        '3': 'warning'    // 退回\n      };\n      return resultMap[result] || 'info';\n    },\n    // 获取时间线项颜色\n    getTimelineItemColor(result) {\n      const colorMap = {\n        '1': '#67C23A',   // 通过\n        '2': '#F56C6C',   // 驳回\n        '3': '#E6A23C'    // 退回\n      };\n      return colorMap[result] || '#909399';\n    },\n    // 审批操作\n    handleApproval(row) {\n      this.resetApprovalForm();\n      this.approvalOpen = true;\n      this.approvalForm.id = row.id;\n      this.approvalForm.applyId = row.applyId;\n      this.approvalForm.applyTitle = row.applyTitle;\n      this.approvalForm.approvalStep = row.approvalStep;\n\n      // 检查是否可以退回\n      getApprovalHistory(row.applyId).then(response => {\n        const history = response.data;\n        // 如果有审批历史，则可以退回\n        this.canReturn = history && history.length > 0;\n      });\n    },\n    // 重置表单\n    reset() {\n      this.form = {};\n      this.approvalSteps = [];\n      this.activeStep = 0;\n      this.processStatus = 'process';\n      this.approvalHistory = [];\n    },\n    // 重置审批表单\n    resetApprovalForm() {\n      this.approvalForm = {\n        id: null,\n        applyId: null,\n        applyTitle: '',\n        approvalStep: '',\n        approvalOpinion: '',\n        approvalResult: '1'\n      };\n      this.canReturn = false;\n    },\n    // 提交审批\n    submitApproval() {\n      this.$refs[\"approvalForm\"].validate(valid => {\n        if (valid) {\n          if (this.approvalForm.approvalResult === '1') {\n            // 通过\n            approve(this.approvalForm.id, this.approvalForm).then(response => {\n              this.$modal.msgSuccess(\"审批已通过\");\n              this.approvalOpen = false;\n              this.getList();\n            });\n          } else if (this.approvalForm.approvalResult === '2') {\n            // 驳回\n            reject(this.approvalForm.id, this.approvalForm).then(response => {\n              this.$modal.msgSuccess(\"审批已驳回\");\n              this.approvalOpen = false;\n              this.getList();\n            });\n          } else if (this.approvalForm.approvalResult === '3') {\n            // 退回\n            returnApproval(this.approvalForm.id, this.approvalForm).then(response => {\n              this.$modal.msgSuccess(\"审批已退回\");\n              this.approvalOpen = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.apply-content {\n  padding: 10px;\n  background-color: #f9f9f9;\n  border: 1px solid #eee;\n  border-radius: 4px;\n  min-height: 100px;\n}\n.mt20 {\n  margin-top: 20px;\n}\n.timeline-card {\n  margin-bottom: 0;\n}\n.timeline-title {\n  font-weight: bold;\n  margin-bottom: 8px;\n}\n.timeline-content {\n  color: #666;\n}\n.timeline-content p {\n  margin: 5px 0;\n}\n</style>\n"]}]}