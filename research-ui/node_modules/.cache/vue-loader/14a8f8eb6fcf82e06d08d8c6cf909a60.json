{"remainingRequest":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Research\\research-ui\\src\\views\\project\\process\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Research\\research-ui\\src\\views\\project\\process\\index.vue","mtime":1740901687801},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1740793410952},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1740793415933}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIHJlc2VhcmNoLXVpL3NyYy92aWV3cy9wcm9qZWN0L3Byb2dyZXNzL2luZGV4LmpzCmltcG9ydCB7IGxpc3RQcm9qZWN0TWlsZXN0b25lcywgYWRkTWlsZXN0b25lLCB1cGRhdGVNaWxlc3RvbmUsIGRlbGV0ZU1pbGVzdG9uZSwgZ2V0UHJvamVjdFByb2dyZXNzU3VtbWFyeSB9IGZyb20gIkAvYXBpL3Byb2plY3QvcHJvZ3Jlc3MiOwppbXBvcnQgeyBnZXRJbmZvIH0gZnJvbSAiQC9hcGkvcHJvamVjdC9pbmZvIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvamVjdFByb2dyZXNzIiwKICBkaWN0czogWydtaWxlc3RvbmVfc3RhdHVzJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpobnnm65JRAogICAgICBwcm9qZWN0SWQ6IG51bGwsCiAgICAgIC8vIOmhueebruS/oeaBrwogICAgICBwcm9qZWN0SW5mbzoge30sCiAgICAgIC8vIOmHjOeoi+eikeWIl+ihqAogICAgICBtaWxlc3RvbmVzOiBbXSwKICAgICAgLy8g5oC76L+b5bqmCiAgICAgIHRvdGFsUHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHByb2plY3RJZDogdW5kZWZpbmVkLAogICAgICAgIG1pbGVzdG9uZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBwbGFuU3RhcnREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcGxhbkVuZERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxTdGFydERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxFbmREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcHJvZ3Jlc3NSYXRlOiAwLAogICAgICAgIGxlYWRlclVzZXJJZDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogIjAiCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIG1pbGVzdG9uZU5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLph4znqIvnopHlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0sCiAgICAgICAgcGxhblN0YXJ0RGF0ZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuiuoeWIkuW8gOWni+aXpeacn+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdLAogICAgICAgIHBsYW5FbmREYXRlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K6h5YiS57uT5p2f5pel5pyf5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImNoYW5nZSIgfQogICAgICAgIF0sCiAgICAgICAgcHJvZ3Jlc3NSYXRlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6L+b5bqm55m+5YiG5q+U5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIGxlYWRlclVzZXJJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIui0n+i0o+S6uuS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucHJvamVjdElkID0gdGhpcy4kcm91dGUucGFyYW1zLnByb2plY3RJZDsKICAgIHRoaXMuZ2V0UHJvamVjdEluZm8oKTsKICAgIHRoaXMuZ2V0TWlsZXN0b25lcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6aG555uu5L+h5oGvCiAgICBnZXRQcm9qZWN0SW5mbygpIHsKICAgICAgZ2V0SW5mbyh0aGlzLnByb2plY3RJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5wcm9qZWN0SW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlumhueebrumHjOeoi+eikeWIl+ihqAogICAgZ2V0TWlsZXN0b25lcygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgbGlzdFByb2plY3RNaWxlc3RvbmVzKHRoaXMucHJvamVjdElkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm1pbGVzdG9uZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuZ2V0UHJvZ3Jlc3NTdW1tYXJ5KCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlumhueebrui/m+W6pue7n+iuoQogICAgZ2V0UHJvZ3Jlc3NTdW1tYXJ5KCkgewogICAgICBnZXRQcm9qZWN0UHJvZ3Jlc3NTdW1tYXJ5KHRoaXMucHJvamVjdElkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnRvdGFsUHJvZ3Jlc3MgPSByZXNwb25zZS5kYXRhLnByb2dyZXNzUmF0ZSB8fCAwOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDov5vluqbmoLzlvI/ljJYKICAgIHByb2dyZXNzRm9ybWF0KHBlcmNlbnRhZ2UpIHsKICAgICAgcmV0dXJuIHBlcmNlbnRhZ2UgKyAnJSc7CiAgICB9LAogICAgLy8g6I635Y+W5pe26Ze057q/6aG557G75Z6LCiAgICBnZXRUaW1lbGluZUl0ZW1UeXBlKHN0YXR1cykgewogICAgICBjb25zdCBzdGF0dXNNYXAgPSB7CiAgICAgICAgJzAnOiAnaW5mbycsICAgIC8vIOacquW8gOWniwogICAgICAgICcxJzogJ3ByaW1hcnknLCAvLyDov5vooYzkuK0KICAgICAgICAnMic6ICdzdWNjZXNzJywgLy8g5bey5a6M5oiQCiAgICAgICAgJzMnOiAnZGFuZ2VyJyAgIC8vIOW3suW7tuacnwogICAgICB9OwogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10gfHwgJ2luZm8nOwogICAgfSwKICAgIC8vIOa3u+WKoOmHjOeoi+eikQogICAgaGFuZGxlQWRkTWlsZXN0b25lKCkgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg6YeM56iL56KRIjsKICAgICAgdGhpcy5mb3JtLnByb2plY3RJZCA9IHRoaXMucHJvamVjdElkOwogICAgfSwKICAgIC8vIOe8lui+kemHjOeoi+eikQogICAgaGFuZGxlRWRpdE1pbGVzdG9uZShtaWxlc3RvbmUpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIue8lui+kemHjOeoi+eikSI7CiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobWlsZXN0b25lKSk7CiAgICB9LAogICAgLy8g5Yig6Zmk6YeM56iL56KRCiAgICBoYW5kbGVEZWxldGVNaWxlc3RvbmUobWlsZXN0b25lKSB7CiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOivpemHjOeoi+eikT8nKS50aGVuKCgpID0+IHsKICAgICAgICBkZWxldGVNaWxlc3RvbmUobWlsZXN0b25lLmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgICAgdGhpcy5nZXRNaWxlc3RvbmVzKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvamVjdElkLAogICAgICAgIG1pbGVzdG9uZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBwbGFuU3RhcnREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcGxhbkVuZERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxTdGFydERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxFbmREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcHJvZ3Jlc3NSYXRlOiAwLAogICAgICAgIGxlYWRlclVzZXJJZDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogIjAiCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgLy8g5Y+W5raI5oyJ6ZKuCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5oyJ6ZKuCiAgICBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHVwZGF0ZU1pbGVzdG9uZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0TWlsZXN0b25lcygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkZE1pbGVzdG9uZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0TWlsZXN0b25lcygpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project/process","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>项目基本信息</span>\n      </div>\n      <el-descriptions :column=\"3\" border>\n        <el-descriptions-item label=\"项目名称\">{{ projectInfo.projectName }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目编号\">{{ projectInfo.projectCode }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目类型\">\n          <dict-tag :options=\"dict.type.project_type\" :value=\"projectInfo.projectType\"/>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"开始日期\">{{ projectInfo.startDate }}</el-descriptions-item>\n        <el-descriptions-item label=\"结束日期\">{{ projectInfo.endDate }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目状态\">\n          <dict-tag :options=\"dict.type.project_status\" :value=\"projectInfo.status\"/>\n        </el-descriptions-item>\n      </el-descriptions>\n    </el-card>\n\n    <el-card class=\"box-card\" style=\"margin-top: 15px\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>项目进度</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          icon=\"el-icon-plus\"\n          @click=\"handleAddMilestone\"\n        >添加里程碑</el-button>\n      </div>\n\n      <el-progress :percentage=\"totalProgress\" :format=\"progressFormat\"></el-progress>\n\n      <el-timeline style=\"margin-top: 20px\">\n        <el-timeline-item\n          v-for=\"(milestone, index) in milestones\"\n          :key=\"index\"\n          :timestamp=\"milestone.planEndDate\"\n          :type=\"getTimelineItemType(milestone.status)\"\n        >\n          <el-card>\n            <h4>{{ milestone.milestoneName }}</h4>\n            <p>计划时间: {{ milestone.planStartDate }} 至 {{ milestone.planEndDate }}</p>\n            <p>负责人: {{ milestone.leaderUserName }}</p>\n            <p>进度: {{ milestone.progressRate }}%</p>\n            <p>状态:\n              <dict-tag :options=\"dict.type.milestone_status\" :value=\"milestone.status\"/>\n            </p>\n            <div class=\"milestone-actions\">\n              <el-button\n                size=\"mini\"\n                type=\"primary\"\n                icon=\"el-icon-edit\"\n                @click=\"handleEditMilestone(milestone)\"\n              >编辑</el-button>\n              <el-button\n                size=\"mini\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDeleteMilestone(milestone)\"\n              >删除</el-button>\n            </div>\n          </el-card>\n        </el-timeline-item>\n      </el-timeline>\n    </el-card>\n\n    <!-- 里程碑编辑对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"里程碑名称\" prop=\"milestoneName\">\n          <el-input v-model=\"form.milestoneName\" placeholder=\"请输入里程碑名称\" />\n        </el-form-item>\n        <el-form-item label=\"计划开始时间\" prop=\"planStartDate\">\n          <el-date-picker\n            v-model=\"form.planStartDate\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n            value-format=\"yyyy-MM-dd\"\n          />\n        </el-form-item>\n        <el-form-item label=\"计划结束时间\" prop=\"planEndDate\">\n          <el-date-picker\n            v-model=\"form.planEndDate\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n            value-format=\"yyyy-MM-dd\"\n          />\n        </el-form-item>\n        <el-form-item label=\"负责人\" prop=\"leaderUserId\">\n          <el-select v-model=\"form.leaderUserId\" placeholder=\"请选择负责人\">\n            <el-option\n              v-for=\"user in userOptions\"\n              :key=\"user.userId\"\n              :label=\"user.userName\"\n              :value=\"user.userId\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"进度百分比\" prop=\"progressRate\">\n          <el-slider v-model=\"form.progressRate\" :format-tooltip=\"formatTooltip\"></el-slider>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\">\n          <el-select v-model=\"form.status\" placeholder=\"请选择状态\">\n            <el-option\n              v-for=\"dict in dict.type.milestone_status\"\n              :key=\"dict.value\"\n              :label=\"dict.label\"\n              :value=\"dict.value\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// research-ui/src/views/project/progress/index.js\nimport { listProjectMilestones, addMilestone, updateMilestone, deleteMilestone, getProjectProgressSummary } from \"@/api/project/progress\";\nimport { getInfo } from \"@/api/project/info\";\n\nexport default {\n  name: \"ProjectProgress\",\n  dicts: ['milestone_status'],\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 项目ID\n      projectId: null,\n      // 项目信息\n      projectInfo: {},\n      // 里程碑列表\n      milestones: [],\n      // 总进度\n      totalProgress: 0,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {\n        id: undefined,\n        projectId: undefined,\n        milestoneName: undefined,\n        planStartDate: undefined,\n        planEndDate: undefined,\n        actualStartDate: undefined,\n        actualEndDate: undefined,\n        progressRate: 0,\n        leaderUserId: undefined,\n        status: \"0\"\n      },\n      // 表单校验\n      rules: {\n        milestoneName: [\n          { required: true, message: \"里程碑名称不能为空\", trigger: \"blur\" }\n        ],\n        planStartDate: [\n          { required: true, message: \"计划开始日期不能为空\", trigger: \"change\" }\n        ],\n        planEndDate: [\n          { required: true, message: \"计划结束日期不能为空\", trigger: \"change\" }\n        ],\n        progressRate: [\n          { required: true, message: \"进度百分比不能为空\", trigger: \"blur\" }\n        ],\n        leaderUserId: [\n          { required: true, message: \"负责人不能为空\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  created() {\n    this.projectId = this.$route.params.projectId;\n    this.getProjectInfo();\n    this.getMilestones();\n  },\n  methods: {\n    // 获取项目信息\n    getProjectInfo() {\n      getInfo(this.projectId).then(response => {\n        this.projectInfo = response.data;\n      });\n    },\n    // 获取项目里程碑列表\n    getMilestones() {\n      this.loading = true;\n      listProjectMilestones(this.projectId).then(response => {\n        this.milestones = response.data;\n        this.loading = false;\n        this.getProgressSummary();\n      });\n    },\n    // 获取项目进度统计\n    getProgressSummary() {\n      getProjectProgressSummary(this.projectId).then(response => {\n        this.totalProgress = response.data.progressRate || 0;\n      });\n    },\n    // 进度格式化\n    progressFormat(percentage) {\n      return percentage + '%';\n    },\n    // 获取时间线项类型\n    getTimelineItemType(status) {\n      const statusMap = {\n        '0': 'info',    // 未开始\n        '1': 'primary', // 进行中\n        '2': 'success', // 已完成\n        '3': 'danger'   // 已延期\n      };\n      return statusMap[status] || 'info';\n    },\n    // 添加里程碑\n    handleAddMilestone() {\n      this.reset();\n      this.open = true;\n      this.title = \"添加里程碑\";\n      this.form.projectId = this.projectId;\n    },\n    // 编辑里程碑\n    handleEditMilestone(milestone) {\n      this.reset();\n      this.open = true;\n      this.title = \"编辑里程碑\";\n      this.form = JSON.parse(JSON.stringify(milestone));\n    },\n    // 删除里程碑\n    handleDeleteMilestone(milestone) {\n      this.$modal.confirm('是否确认删除该里程碑?').then(() => {\n        deleteMilestone(milestone.id).then(() => {\n          this.$modal.msgSuccess(\"删除成功\");\n          this.getMilestones();\n        });\n      }).catch(() => {});\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: undefined,\n        projectId: this.projectId,\n        milestoneName: undefined,\n        planStartDate: undefined,\n        planEndDate: undefined,\n        actualStartDate: undefined,\n        actualEndDate: undefined,\n        progressRate: 0,\n        leaderUserId: undefined,\n        status: \"0\"\n      };\n      this.resetForm(\"form\");\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 提交按钮\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id !== undefined) {\n            updateMilestone(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getMilestones();\n            });\n          } else {\n            addMilestone(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getMilestones();\n            });\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.milestone-actions {\n  margin-top: 10px;\n  text-align: right;\n}\n</style>\n"]}]}