{"remainingRequest":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Research\\research-ui\\src\\views\\project\\process\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Research\\research-ui\\src\\views\\project\\process\\index.vue","mtime":1740901687801},{"path":"D:\\Code\\Research\\research-ui\\babel.config.js","mtime":1740791050434},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1740793410952},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1740793415933}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKdmFyIF9wcm9ncmVzcyA9IHJlcXVpcmUoIkAvYXBpL3Byb2plY3QvcHJvZ3Jlc3MiKTsKdmFyIF9pbmZvID0gcmVxdWlyZSgiQC9hcGkvcHJvamVjdC9pbmZvIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIHJlc2VhcmNoLXVpL3NyYy92aWV3cy9wcm9qZWN0L3Byb2dyZXNzL2luZGV4LmpzCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiUHJvamVjdFByb2dyZXNzIiwKICBkaWN0czogWydtaWxlc3RvbmVfc3RhdHVzJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOmBrue9qeWxggogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAvLyDpobnnm65JRAogICAgICBwcm9qZWN0SWQ6IG51bGwsCiAgICAgIC8vIOmhueebruS/oeaBrwogICAgICBwcm9qZWN0SW5mbzoge30sCiAgICAgIC8vIOmHjOeoi+eikeWIl+ihqAogICAgICBtaWxlc3RvbmVzOiBbXSwKICAgICAgLy8g5oC76L+b5bqmCiAgICAgIHRvdGFsUHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxggogICAgICBvcGVuOiBmYWxzZSwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHByb2plY3RJZDogdW5kZWZpbmVkLAogICAgICAgIG1pbGVzdG9uZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBwbGFuU3RhcnREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcGxhbkVuZERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxTdGFydERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBhY3R1YWxFbmREYXRlOiB1bmRlZmluZWQsCiAgICAgICAgcHJvZ3Jlc3NSYXRlOiAwLAogICAgICAgIGxlYWRlclVzZXJJZDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogIjAiCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIG1pbGVzdG9uZU5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLph4znqIvnopHlkI3np7DkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcGxhblN0YXJ0RGF0ZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuiuoeWIkuW8gOWni+aXpeacn+S4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgIH1dLAogICAgICAgIHBsYW5FbmREYXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K6h5YiS57uT5p2f5pel5pyf5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgcHJvZ3Jlc3NSYXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6L+b5bqm55m+5YiG5q+U5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGxlYWRlclVzZXJJZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIui0n+i0o+S6uuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucHJvamVjdElkID0gdGhpcy4kcm91dGUucGFyYW1zLnByb2plY3RJZDsKICAgIHRoaXMuZ2V0UHJvamVjdEluZm8oKTsKICAgIHRoaXMuZ2V0TWlsZXN0b25lcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6aG555uu5L+h5oGvCiAgICBnZXRQcm9qZWN0SW5mbzogZnVuY3Rpb24gZ2V0UHJvamVjdEluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICgwLCBfaW5mby5nZXRJbmZvKSh0aGlzLnByb2plY3RJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5wcm9qZWN0SW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlumhueebrumHjOeoi+eikeWIl+ihqAogICAgZ2V0TWlsZXN0b25lczogZnVuY3Rpb24gZ2V0TWlsZXN0b25lcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfcHJvZ3Jlc3MubGlzdFByb2plY3RNaWxlc3RvbmVzKSh0aGlzLnByb2plY3RJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIubWlsZXN0b25lcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpczIuZ2V0UHJvZ3Jlc3NTdW1tYXJ5KCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlumhueebrui/m+W6pue7n+iuoQogICAgZ2V0UHJvZ3Jlc3NTdW1tYXJ5OiBmdW5jdGlvbiBnZXRQcm9ncmVzc1N1bW1hcnkoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICAoMCwgX3Byb2dyZXNzLmdldFByb2plY3RQcm9ncmVzc1N1bW1hcnkpKHRoaXMucHJvamVjdElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy50b3RhbFByb2dyZXNzID0gcmVzcG9uc2UuZGF0YS5wcm9ncmVzc1JhdGUgfHwgMDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6L+b5bqm5qC85byP5YyWCiAgICBwcm9ncmVzc0Zvcm1hdDogZnVuY3Rpb24gcHJvZ3Jlc3NGb3JtYXQocGVyY2VudGFnZSkgewogICAgICByZXR1cm4gcGVyY2VudGFnZSArICclJzsKICAgIH0sCiAgICAvLyDojrflj5bml7bpl7Tnur/pobnnsbvlnosKICAgIGdldFRpbWVsaW5lSXRlbVR5cGU6IGZ1bmN0aW9uIGdldFRpbWVsaW5lSXRlbVR5cGUoc3RhdHVzKSB7CiAgICAgIHZhciBzdGF0dXNNYXAgPSB7CiAgICAgICAgJzAnOiAnaW5mbycsCiAgICAgICAgLy8g5pyq5byA5aeLCiAgICAgICAgJzEnOiAncHJpbWFyeScsCiAgICAgICAgLy8g6L+b6KGM5LitCiAgICAgICAgJzInOiAnc3VjY2VzcycsCiAgICAgICAgLy8g5bey5a6M5oiQCiAgICAgICAgJzMnOiAnZGFuZ2VyJyAvLyDlt7Llu7bmnJ8KICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdIHx8ICdpbmZvJzsKICAgIH0sCiAgICAvLyDmt7vliqDph4znqIvnopEKICAgIGhhbmRsZUFkZE1pbGVzdG9uZTogZnVuY3Rpb24gaGFuZGxlQWRkTWlsZXN0b25lKCkgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMub3BlbiA9IHRydWU7CiAgICAgIHRoaXMudGl0bGUgPSAi5re75Yqg6YeM56iL56KRIjsKICAgICAgdGhpcy5mb3JtLnByb2plY3RJZCA9IHRoaXMucHJvamVjdElkOwogICAgfSwKICAgIC8vIOe8lui+kemHjOeoi+eikQogICAgaGFuZGxlRWRpdE1pbGVzdG9uZTogZnVuY3Rpb24gaGFuZGxlRWRpdE1pbGVzdG9uZShtaWxlc3RvbmUpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIue8lui+kemHjOeoi+eikSI7CiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobWlsZXN0b25lKSk7CiAgICB9LAogICAgLy8g5Yig6Zmk6YeM56iL56KRCiAgICBoYW5kbGVEZWxldGVNaWxlc3RvbmU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZU1pbGVzdG9uZShtaWxlc3RvbmUpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOivpemHjOeoi+eikT8nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAoMCwgX3Byb2dyZXNzLmRlbGV0ZU1pbGVzdG9uZSkobWlsZXN0b25lLmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNC4kbW9kYWwubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgICAgICBfdGhpczQuZ2V0TWlsZXN0b25lcygpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgLy8g6KGo5Y2V6YeN572uCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHByb2plY3RJZDogdGhpcy5wcm9qZWN0SWQsCiAgICAgICAgbWlsZXN0b25lTmFtZTogdW5kZWZpbmVkLAogICAgICAgIHBsYW5TdGFydERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBwbGFuRW5kRGF0ZTogdW5kZWZpbmVkLAogICAgICAgIGFjdHVhbFN0YXJ0RGF0ZTogdW5kZWZpbmVkLAogICAgICAgIGFjdHVhbEVuZERhdGU6IHVuZGVmaW5lZCwKICAgICAgICBwcm9ncmVzc1JhdGU6IDAsCiAgICAgICAgbGVhZGVyVXNlcklkOiB1bmRlZmluZWQsCiAgICAgICAgc3RhdHVzOiAiMCIKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOaPkOS6pOaMiemSrgogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpczUuZm9ybS5pZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICgwLCBfcHJvZ3Jlc3MudXBkYXRlTWlsZXN0b25lKShfdGhpczUuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczUuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzNS5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXM1LmdldE1pbGVzdG9uZXMoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAoMCwgX3Byb2dyZXNzLmFkZE1pbGVzdG9uZSkoX3RoaXM1LmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRtb2RhbC5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICBfdGhpczUub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzNS5nZXRNaWxlc3RvbmVzKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_progress","require","_info","_default","exports","default","name","dicts","data","loading","projectId","projectInfo","milestones","totalProgress","title","open","form","id","undefined","milestoneName","planStartDate","planEndDate","actualStartDate","actualEndDate","progressRate","leaderUserId","status","rules","required","message","trigger","created","$route","params","getProjectInfo","getMilestones","methods","_this","getInfo","then","response","_this2","listProjectMilestones","getProgressSummary","_this3","getProjectProgressSummary","progressFormat","percentage","getTimelineItemType","statusMap","handleAddMilestone","reset","handleEditMilestone","milestone","JSON","parse","stringify","handleDeleteMilestone","_this4","$modal","confirm","deleteMilestone","msgSuccess","catch","resetForm","cancel","submitForm","_this5","$refs","validate","valid","updateMilestone","addMilestone"],"sources":["src/views/project/process/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>项目基本信息</span>\n      </div>\n      <el-descriptions :column=\"3\" border>\n        <el-descriptions-item label=\"项目名称\">{{ projectInfo.projectName }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目编号\">{{ projectInfo.projectCode }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目类型\">\n          <dict-tag :options=\"dict.type.project_type\" :value=\"projectInfo.projectType\"/>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"开始日期\">{{ projectInfo.startDate }}</el-descriptions-item>\n        <el-descriptions-item label=\"结束日期\">{{ projectInfo.endDate }}</el-descriptions-item>\n        <el-descriptions-item label=\"项目状态\">\n          <dict-tag :options=\"dict.type.project_status\" :value=\"projectInfo.status\"/>\n        </el-descriptions-item>\n      </el-descriptions>\n    </el-card>\n\n    <el-card class=\"box-card\" style=\"margin-top: 15px\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>项目进度</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          icon=\"el-icon-plus\"\n          @click=\"handleAddMilestone\"\n        >添加里程碑</el-button>\n      </div>\n\n      <el-progress :percentage=\"totalProgress\" :format=\"progressFormat\"></el-progress>\n\n      <el-timeline style=\"margin-top: 20px\">\n        <el-timeline-item\n          v-for=\"(milestone, index) in milestones\"\n          :key=\"index\"\n          :timestamp=\"milestone.planEndDate\"\n          :type=\"getTimelineItemType(milestone.status)\"\n        >\n          <el-card>\n            <h4>{{ milestone.milestoneName }}</h4>\n            <p>计划时间: {{ milestone.planStartDate }} 至 {{ milestone.planEndDate }}</p>\n            <p>负责人: {{ milestone.leaderUserName }}</p>\n            <p>进度: {{ milestone.progressRate }}%</p>\n            <p>状态:\n              <dict-tag :options=\"dict.type.milestone_status\" :value=\"milestone.status\"/>\n            </p>\n            <div class=\"milestone-actions\">\n              <el-button\n                size=\"mini\"\n                type=\"primary\"\n                icon=\"el-icon-edit\"\n                @click=\"handleEditMilestone(milestone)\"\n              >编辑</el-button>\n              <el-button\n                size=\"mini\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                @click=\"handleDeleteMilestone(milestone)\"\n              >删除</el-button>\n            </div>\n          </el-card>\n        </el-timeline-item>\n      </el-timeline>\n    </el-card>\n\n    <!-- 里程碑编辑对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"里程碑名称\" prop=\"milestoneName\">\n          <el-input v-model=\"form.milestoneName\" placeholder=\"请输入里程碑名称\" />\n        </el-form-item>\n        <el-form-item label=\"计划开始时间\" prop=\"planStartDate\">\n          <el-date-picker\n            v-model=\"form.planStartDate\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n            value-format=\"yyyy-MM-dd\"\n          />\n        </el-form-item>\n        <el-form-item label=\"计划结束时间\" prop=\"planEndDate\">\n          <el-date-picker\n            v-model=\"form.planEndDate\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n            value-format=\"yyyy-MM-dd\"\n          />\n        </el-form-item>\n        <el-form-item label=\"负责人\" prop=\"leaderUserId\">\n          <el-select v-model=\"form.leaderUserId\" placeholder=\"请选择负责人\">\n            <el-option\n              v-for=\"user in userOptions\"\n              :key=\"user.userId\"\n              :label=\"user.userName\"\n              :value=\"user.userId\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"进度百分比\" prop=\"progressRate\">\n          <el-slider v-model=\"form.progressRate\" :format-tooltip=\"formatTooltip\"></el-slider>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\">\n          <el-select v-model=\"form.status\" placeholder=\"请选择状态\">\n            <el-option\n              v-for=\"dict in dict.type.milestone_status\"\n              :key=\"dict.value\"\n              :label=\"dict.label\"\n              :value=\"dict.value\"\n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// research-ui/src/views/project/progress/index.js\nimport { listProjectMilestones, addMilestone, updateMilestone, deleteMilestone, getProjectProgressSummary } from \"@/api/project/progress\";\nimport { getInfo } from \"@/api/project/info\";\n\nexport default {\n  name: \"ProjectProgress\",\n  dicts: ['milestone_status'],\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 项目ID\n      projectId: null,\n      // 项目信息\n      projectInfo: {},\n      // 里程碑列表\n      milestones: [],\n      // 总进度\n      totalProgress: 0,\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 表单参数\n      form: {\n        id: undefined,\n        projectId: undefined,\n        milestoneName: undefined,\n        planStartDate: undefined,\n        planEndDate: undefined,\n        actualStartDate: undefined,\n        actualEndDate: undefined,\n        progressRate: 0,\n        leaderUserId: undefined,\n        status: \"0\"\n      },\n      // 表单校验\n      rules: {\n        milestoneName: [\n          { required: true, message: \"里程碑名称不能为空\", trigger: \"blur\" }\n        ],\n        planStartDate: [\n          { required: true, message: \"计划开始日期不能为空\", trigger: \"change\" }\n        ],\n        planEndDate: [\n          { required: true, message: \"计划结束日期不能为空\", trigger: \"change\" }\n        ],\n        progressRate: [\n          { required: true, message: \"进度百分比不能为空\", trigger: \"blur\" }\n        ],\n        leaderUserId: [\n          { required: true, message: \"负责人不能为空\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  created() {\n    this.projectId = this.$route.params.projectId;\n    this.getProjectInfo();\n    this.getMilestones();\n  },\n  methods: {\n    // 获取项目信息\n    getProjectInfo() {\n      getInfo(this.projectId).then(response => {\n        this.projectInfo = response.data;\n      });\n    },\n    // 获取项目里程碑列表\n    getMilestones() {\n      this.loading = true;\n      listProjectMilestones(this.projectId).then(response => {\n        this.milestones = response.data;\n        this.loading = false;\n        this.getProgressSummary();\n      });\n    },\n    // 获取项目进度统计\n    getProgressSummary() {\n      getProjectProgressSummary(this.projectId).then(response => {\n        this.totalProgress = response.data.progressRate || 0;\n      });\n    },\n    // 进度格式化\n    progressFormat(percentage) {\n      return percentage + '%';\n    },\n    // 获取时间线项类型\n    getTimelineItemType(status) {\n      const statusMap = {\n        '0': 'info',    // 未开始\n        '1': 'primary', // 进行中\n        '2': 'success', // 已完成\n        '3': 'danger'   // 已延期\n      };\n      return statusMap[status] || 'info';\n    },\n    // 添加里程碑\n    handleAddMilestone() {\n      this.reset();\n      this.open = true;\n      this.title = \"添加里程碑\";\n      this.form.projectId = this.projectId;\n    },\n    // 编辑里程碑\n    handleEditMilestone(milestone) {\n      this.reset();\n      this.open = true;\n      this.title = \"编辑里程碑\";\n      this.form = JSON.parse(JSON.stringify(milestone));\n    },\n    // 删除里程碑\n    handleDeleteMilestone(milestone) {\n      this.$modal.confirm('是否确认删除该里程碑?').then(() => {\n        deleteMilestone(milestone.id).then(() => {\n          this.$modal.msgSuccess(\"删除成功\");\n          this.getMilestones();\n        });\n      }).catch(() => {});\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: undefined,\n        projectId: this.projectId,\n        milestoneName: undefined,\n        planStartDate: undefined,\n        planEndDate: undefined,\n        actualStartDate: undefined,\n        actualEndDate: undefined,\n        progressRate: 0,\n        leaderUserId: undefined,\n        status: \"0\"\n      };\n      this.resetForm(\"form\");\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 提交按钮\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id !== undefined) {\n            updateMilestone(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getMilestones();\n            });\n          } else {\n            addMilestone(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getMilestones();\n            });\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.milestone-actions {\n  margin-top: 10px;\n  text-align: right;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}