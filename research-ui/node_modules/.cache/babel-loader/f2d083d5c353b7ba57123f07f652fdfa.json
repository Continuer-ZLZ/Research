{"remainingRequest":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Research\\research-ui\\src\\views\\project\\document\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Research\\research-ui\\src\\views\\project\\document\\index.vue","mtime":1740901826726},{"path":"D:\\Code\\Research\\research-ui\\babel.config.js","mtime":1740791050434},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1740793410952},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1740793415933}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9Db2RlL1Jlc2VhcmNoL3Jlc2VhcmNoLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX3R5cGVvZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkQ6L0NvZGUvUmVzZWFyY2gvcmVzZWFyY2gtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzIikpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLm1hcC5qcyIpOwp2YXIgX2RvY3VtZW50ID0gcmVxdWlyZSgiQC9hcGkvcHJvamVjdC9kb2N1bWVudCIpOwp2YXIgX2luZm8gPSByZXF1aXJlKCJAL2FwaS9wcm9qZWN0L2luZm8iKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIHJlc2VhcmNoLXVpL3NyYy92aWV3cy9wcm9qZWN0L2RvY3VtZW50L2luZGV4LmpzCnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHsKICBuYW1lOiAiRG9jdW1lbnQiLAogIGRpY3RzOiBbJ2RvY3VtZW50X3R5cGUnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOmhueebruaho+ahiOihqOagvOaVsOaNrgogICAgICBkb2N1bWVudExpc3Q6IFtdLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICIiLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHByb2plY3RJZDogbnVsbCwKICAgICAgICBkb2N1bWVudE5hbWU6IG51bGwsCiAgICAgICAgZG9jdW1lbnRUeXBlOiBudWxsCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgcHJvamVjdElkOiBudWxsLAogICAgICAgIGRvY3VtZW50TmFtZTogbnVsbCwKICAgICAgICBkb2N1bWVudFR5cGU6IG51bGwsCiAgICAgICAgZmlsZVBhdGg6IG51bGwKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V5qCh6aqMCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcHJvamVjdElkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6aG555uu5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgZG9jdW1lbnROYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5paH5qGj5ZCN56ew5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGRvY3VtZW50VHlwZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuaWh+aho+exu+Wei+S4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIC8vIOmhueebrumAiemhuQogICAgICBwcm9qZWN0T3B0aW9uczogW10sCiAgICAgIC8vIOaWh+S7tuWIl+ihqAogICAgICBmaWxlTGlzdDogW10sCiAgICAgIC8vIOS4iuS8oOWktOmDqAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldFByb2plY3RPcHRpb25zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bpobnnm67moaPmoYjliJfooagKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfZG9jdW1lbnQubGlzdERvY3VtZW50KSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmRvY3VtZW50TGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlumhueebrumAiemhuQogICAgZ2V0UHJvamVjdE9wdGlvbnM6IGZ1bmN0aW9uIGdldFByb2plY3RPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgKDAsIF9pbmZvLmxpc3RJbmZvQWxsKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnByb2plY3RPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5qC85byP5YyW5paH5Lu25aSn5bCPCiAgICBmb3JtYXRGaWxlU2l6ZTogZnVuY3Rpb24gZm9ybWF0RmlsZVNpemUoc2l6ZSkgewogICAgICBpZiAoc2l6ZSA8IDEwMjQpIHsKICAgICAgICByZXR1cm4gc2l6ZSArICcgQic7CiAgICAgIH0gZWxzZSBpZiAoc2l6ZSA8IDEwMjQgKiAxMDI0KSB7CiAgICAgICAgcmV0dXJuIChzaXplIC8gMTAyNCkudG9GaXhlZCgyKSArICcgS0InOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAoc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpICsgJyBNQic7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliKTmlq3mmK/lkKblj6/pooTop4jmlofku7YKICAgIGlzUHJldmlld2FibGU6IGZ1bmN0aW9uIGlzUHJldmlld2FibGUoZmlsZU5hbWUpIHsKICAgICAgaWYgKCFmaWxlTmFtZSkgcmV0dXJuIGZhbHNlOwogICAgICB2YXIgc3VmZml4ID0gZmlsZU5hbWUuc3Vic3RyaW5nKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKS50b0xvd2VyQ2FzZSgpOwogICAgICByZXR1cm4gWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCcsICdwZGYnLCAndHh0JywgJ2RvYycsICdkb2N4JywgJ3hscycsICd4bHN4JywgJ3BwdCcsICdwcHR4J10uaW5kZXhPZihzdWZmaXgpICE9PSAtMTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgcHJvamVjdElkOiBudWxsLAogICAgICAgIGRvY3VtZW50TmFtZTogbnVsbCwKICAgICAgICBkb2N1bWVudFR5cGU6IG51bGwsCiAgICAgICAgZmlsZVBhdGg6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOwogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOwogICAgfSwKICAgIC8vIOaQnOe0ouaMiemSruaTjeS9nAogICAgaGFuZGxlUXVlcnk6IGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDph43nva7mjInpkq7mk43kvZwKICAgIHJlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICB9KTsKICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoICE9PSAxOwogICAgICB0aGlzLm11bHRpcGxlID0gIXNlbGVjdGlvbi5sZW5ndGg7CiAgICB9LAogICAgLy8g5paw5aKe5oyJ6ZKu5pON5L2cCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOmhueebruaho+ahiCI7CiAgICB9LAogICAgLy8g5Yig6Zmk5oyJ6ZKu5pON5L2cCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciBpZHMgPSByb3cuaWQgfHwgdGhpcy5pZHM7CiAgICAgIHRoaXMuJG1vZGFsLmNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOmhueebruaho+ahiOe8luWPt+S4uiInICsgaWRzICsgJyLnmoTmlbDmja7pobnvvJ8nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKDAsIF9kb2N1bWVudC5kZWxEb2N1bWVudCkoaWRzKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmdldExpc3QoKTsKICAgICAgICBfdGhpczMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgLy8g5LiL6L295paH5Lu2CiAgICBoYW5kbGVEb3dubG9hZDogZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQocm93KSB7CiAgICAgIHdpbmRvdy5vcGVuKHJvdy5maWxlUGF0aCk7CiAgICB9LAogICAgLy8g6aKE6KeI5paH5Lu2CiAgICBoYW5kbGVQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3KHJvdykgewogICAgICB2YXIgdXJsID0gKDAsIF90eXBlb2YyLmRlZmF1bHQpKHJvdykgPT09ICdvYmplY3QnID8gcm93LmZpbGVQYXRoIHx8IHJvdy51cmwgOiByb3c7CiAgICAgIHdpbmRvdy5vcGVuKHVybCk7CiAgICB9LAogICAgLy8g5LiK5Lyg5oiQ5Yqf5Zue6LCDCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZvcm0uZmlsZVBhdGggPSByZXNwb25zZS51cmw7CiAgICAgIHRoaXMuZm9ybS5maWxlU2l6ZSA9IGZpbGUuc2l6ZTsKICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5LiK5Lyg5oiQ5YqfIik7CiAgICB9LAogICAgLy8g56e76Zmk5paH5Lu2CiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZvcm0uZmlsZVBhdGggPSAnJzsKICAgICAgdGhpcy5mb3JtLmZpbGVTaXplID0gMDsKICAgIH0sCiAgICAvLyDkuIrkvKDliY3moKHpqowKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzTHQyME0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDIwOwogICAgICBpZiAoIWlzTHQyME0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDmlofku7blpKflsI/kuI3og73otoXov4cgMjBNQiEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g5o+Q5Lqk6KGo5Y2VCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKCFfdGhpczQuZm9ybS5maWxlUGF0aCkgewogICAgICAgICAgICBfdGhpczQuJG1lc3NhZ2UuZXJyb3IoJ+ivt+S4iuS8oOaWh+S7ticpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXM0LmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICAoMCwgX2RvY3VtZW50LnVwZGF0ZURvY3VtZW50KShfdGhpczQuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzNC5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAoMCwgX2RvY3VtZW50LmFkZERvY3VtZW50KShfdGhpczQuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczQuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzNC5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXM0LmdldExpc3QoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["_document","require","_info","_auth","_default","exports","default","name","dicts","data","loading","ids","single","multiple","showSearch","total","documentList","title","open","queryParams","pageNum","pageSize","projectId","documentName","documentType","form","id","filePath","rules","required","message","trigger","projectOptions","fileList","headers","Authorization","getToken","created","getList","getProjectOptions","methods","_this","listDocument","then","response","rows","_this2","listInfoAll","formatFileSize","size","toFixed","isPreviewable","fileName","suffix","substring","lastIndexOf","toLowerCase","indexOf","cancel","reset","resetForm","handleQuery","resetQuery","handleSelectionChange","selection","map","item","length","handleAdd","handleDelete","row","_this3","$modal","confirm","delDocument","msgSuccess","catch","handleDownload","window","handlePreview","url","_typeof2","handleUploadSuccess","file","fileSize","handleRemove","beforeUpload","isLt20M","$message","error","submitForm","_this4","$refs","validate","valid","updateDocument","addDocument"],"sources":["src/views/project/document/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"项目名称\" prop=\"projectId\">\n        <el-select v-model=\"queryParams.projectId\" placeholder=\"请选择项目\" clearable>\n          <el-option\n            v-for=\"item in projectOptions\"\n            :key=\"item.id\"\n            :label=\"item.projectName\"\n            :value=\"item.id\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"文档名称\" prop=\"documentName\">\n        <el-input\n          v-model=\"queryParams.documentName\"\n          placeholder=\"请输入文档名称\"\n          clearable\n          style=\"width: 240px\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"文档类型\" prop=\"documentType\">\n        <el-select v-model=\"queryParams.documentType\" placeholder=\"请选择文档类型\" clearable>\n          <el-option\n            v-for=\"dict in dict.type.document_type\"\n            :key=\"dict.value\"\n            :label=\"dict.label\"\n            :value=\"dict.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          plain\n          icon=\"el-icon-plus\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['project:document:add']\"\n        >新增</el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['project:document:remove']\"\n        >删除</el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n\n    <el-table v-loading=\"loading\" :data=\"documentList\" @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n      <el-table-column label=\"文档编号\" align=\"center\" prop=\"documentCode\" />\n      <el-table-column label=\"文档名称\" align=\"center\" prop=\"documentName\" />\n      <el-table-column label=\"项目名称\" align=\"center\" prop=\"projectName\" />\n      <el-table-column label=\"文档类型\" align=\"center\" prop=\"documentType\">\n        <template slot-scope=\"scope\">\n          <dict-tag :options=\"dict.type.document_type\" :value=\"scope.row.documentType\"/>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"文件大小\" align=\"center\" prop=\"fileSize\">\n        <template slot-scope=\"scope\">\n          {{ formatFileSize(scope.row.fileSize) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"上传时间\" align=\"center\" prop=\"uploadTime\" width=\"180\" />\n      <el-table-column label=\"上传人\" align=\"center\" prop=\"uploadUserName\" />\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-download\"\n            @click=\"handleDownload(scope.row)\"\n          >下载</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-view\"\n            @click=\"handlePreview(scope.row)\"\n            v-if=\"isPreviewable(scope.row.documentName)\"\n          >预览</el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n            v-hasPermi=\"['project:document:remove']\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n\n    <!-- 添加文档对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"500px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"项目\" prop=\"projectId\">\n          <el-select v-model=\"form.projectId\" placeholder=\"请选择项目\">\n            <el-option\n              v-for=\"item in projectOptions\"\n              :key=\"item.id\"\n              :label=\"item.projectName\"\n              :value=\"item.id\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"文档名称\" prop=\"documentName\">\n          <el-input v-model=\"form.documentName\" placeholder=\"请输入文档名称\" />\n        </el-form-item>\n        <el-form-item label=\"文档类型\" prop=\"documentType\">\n          <el-select v-model=\"form.documentType\" placeholder=\"请选择文档类型\">\n            <el-option\n              v-for=\"dict in dict.type.document_type\"\n              :key=\"dict.value\"\n              :label=\"dict.label\"\n              :value=\"dict.value\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"文档文件\" prop=\"filePath\">\n          <el-upload\n            class=\"upload-demo\"\n            ref=\"upload\"\n            action=\"/api/common/upload\"\n            :on-preview=\"handlePreview\"\n            :on-remove=\"handleRemove\"\n            :on-success=\"handleUploadSuccess\"\n            :file-list=\"fileList\"\n            :headers=\"headers\"\n            :before-upload=\"beforeUpload\">\n            <el-button type=\"primary\">点击上传</el-button>\n            <div slot=\"tip\" class=\"el-upload__tip\">请上传文档文件，单个文件不超过20MB</div>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// research-ui/src/views/project/document/index.js\nimport { listDocument, getDocument, addDocument, updateDocument, delDocument } from \"@/api/project/document\";\nimport { listInfoAll } from \"@/api/project/info\";\nimport { getToken } from \"@/utils/auth\";\n\nexport default {\n  name: \"Document\",\n  dicts: ['document_type'],\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 项目档案表格数据\n      documentList: [],\n      // 弹出层标题\n      title: \"\",\n      // 是否显示弹出层\n      open: false,\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        projectId: null,\n        documentName: null,\n        documentType: null\n      },\n      // 表单参数\n      form: {\n        id: null,\n        projectId: null,\n        documentName: null,\n        documentType: null,\n        filePath: null\n      },\n      // 表单校验\n      rules: {\n        projectId: [\n          { required: true, message: \"项目不能为空\", trigger: \"change\" }\n        ],\n        documentName: [\n          { required: true, message: \"文档名称不能为空\", trigger: \"blur\" }\n        ],\n        documentType: [\n          { required: true, message: \"文档类型不能为空\", trigger: \"change\" }\n        ]\n      },\n      // 项目选项\n      projectOptions: [],\n      // 文件列表\n      fileList: [],\n      // 上传头部\n      headers: {\n        Authorization: 'Bearer ' + getToken()\n      }\n    };\n  },\n  created() {\n    this.getList();\n    this.getProjectOptions();\n  },\n  methods: {\n    // 获取项目档案列表\n    getList() {\n      this.loading = true;\n      listDocument(this.queryParams).then(response => {\n        this.documentList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n    },\n    // 获取项目选项\n    getProjectOptions() {\n      listInfoAll().then(response => {\n        this.projectOptions = response.data;\n      });\n    },\n    // 格式化文件大小\n    formatFileSize(size) {\n      if (size < 1024) {\n        return size + ' B';\n      } else if (size < 1024 * 1024) {\n        return (size / 1024).toFixed(2) + ' KB';\n      } else {\n        return (size / 1024 / 1024).toFixed(2) + ' MB';\n      }\n    },\n    // 判断是否可预览文件\n    isPreviewable(fileName) {\n      if (!fileName) return false;\n      const suffix = fileName.substring(fileName.lastIndexOf('.') + 1).toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'pdf', 'txt', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx'].indexOf(suffix) !== -1;\n    },\n    // 取消按钮\n    cancel() {\n      this.open = false;\n      this.reset();\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        projectId: null,\n        documentName: null,\n        documentType: null,\n        filePath: null\n      };\n      this.fileList = [];\n      this.resetForm(\"form\");\n    },\n    // 搜索按钮操作\n    handleQuery() {\n      this.queryParams.pageNum = 1;\n      this.getList();\n    },\n    // 重置按钮操作\n    resetQuery() {\n      this.resetForm(\"queryForm\");\n      this.handleQuery();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id)\n      this.single = selection.length!==1\n      this.multiple = !selection.length\n    },\n    // 新增按钮操作\n    handleAdd() {\n      this.reset();\n      this.open = true;\n      this.title = \"添加项目档案\";\n    },\n    // 删除按钮操作\n    handleDelete(row) {\n      const ids = row.id || this.ids;\n      this.$modal.confirm('是否确认删除项目档案编号为\"' + ids + '\"的数据项？').then(() => {\n        return delDocument(ids);\n      }).then(() => {\n        this.getList();\n        this.$modal.msgSuccess(\"删除成功\");\n      }).catch(() => {});\n    },\n    // 下载文件\n    handleDownload(row) {\n      window.open(row.filePath);\n    },\n    // 预览文件\n    handlePreview(row) {\n      const url = typeof row === 'object' ? row.filePath || row.url : row;\n      window.open(url);\n    },\n    // 上传成功回调\n    handleUploadSuccess(response, file, fileList) {\n      this.form.filePath = response.url;\n      this.form.fileSize = file.size;\n      this.$modal.msgSuccess(\"上传成功\");\n    },\n    // 移除文件\n    handleRemove(file, fileList) {\n      this.form.filePath = '';\n      this.form.fileSize = 0;\n    },\n    // 上传前校验\n    beforeUpload(file) {\n      const isLt20M = file.size / 1024 / 1024 < 20;\n      if (!isLt20M) {\n        this.$message.error('上传文件大小不能超过 20MB!');\n        return false;\n      }\n      return true;\n    },\n    // 提交表单\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (!this.form.filePath) {\n            this.$message.error('请上传文件');\n            return;\n          }\n\n          if (this.form.id != null) {\n            updateDocument(this.form).then(response => {\n              this.$modal.msgSuccess(\"修改成功\");\n              this.open = false;\n              this.getList();\n            });\n          } else {\n            addDocument(this.form).then(response => {\n              this.$modal.msgSuccess(\"新增成功\");\n              this.open = false;\n              this.getList();\n            });\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n"],"mappings":"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","ignoreList":[]}]}