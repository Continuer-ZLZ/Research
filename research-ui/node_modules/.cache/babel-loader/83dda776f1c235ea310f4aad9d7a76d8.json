{"remainingRequest":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\Research\\research-ui\\src\\views\\project\\acceptance\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Code\\Research\\research-ui\\src\\views\\project\\acceptance\\index.vue","mtime":1740901762435},{"path":"D:\\Code\\Research\\research-ui\\babel.config.js","mtime":1740791050434},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1740793410952},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740793404454},{"path":"D:\\Code\\Research\\research-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1740793415933}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfYWNjZXB0YW5jZSA9IHJlcXVpcmUoIkAvYXBpL3Byb2plY3QvYWNjZXB0YW5jZSIpOwp2YXIgX2luZm8gPSByZXF1aXJlKCJAL2FwaS9wcm9qZWN0L2luZm8iKTsKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIHJlc2VhcmNoLXVpL3NyYy92aWV3cy9wcm9qZWN0L2FjY2VwdGFuY2UvaW5kZXguanMKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICJQcm9qZWN0QWNjZXB0YW5jZSIsCiAgZGljdHM6IFsnYWNjZXB0YW5jZV9zdGF0dXMnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOmhueebrklECiAgICAgIHByb2plY3RJZDogbnVsbCwKICAgICAgLy8g6aG555uu5L+h5oGvCiAgICAgIHByb2plY3RJbmZvOiB7fSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgcHJvamVjdElkOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgLy8g6aqM5pS26K6w5b2V5YiX6KGoCiAgICAgIGFjY2VwdGFuY2VMaXN0OiBbXSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDpqozmlLbooajljZUKICAgICAgZm9ybTogewogICAgICAgIHByb2plY3RJZDogdW5kZWZpbmVkLAogICAgICAgIGFjY2VwdGFuY2VUaXRsZTogdW5kZWZpbmVkLAogICAgICAgIGFjY2VwdGFuY2VDb250ZW50OiB1bmRlZmluZWQsCiAgICAgICAgbWF0ZXJpYWxzUGF0aDogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIC8vIOmqjOaUtuivpuaDheihqOWNlQogICAgICB2aWV3Rm9ybToge30sCiAgICAgIC8vIOmqjOaUtuivhOWuoeihqOWNlQogICAgICBhY2NlcHRhbmNlRm9ybTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIHNjb3JlOiA1LAogICAgICAgIG9waW5pb246ICcnLAogICAgICAgIHN0YXR1czogJzEnCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIGFjY2VwdGFuY2VUaXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIumqjOaUtuagh+mimOS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBhY2NlcHRhbmNlQ29udGVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIumqjOaUtuWGheWuueS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICAvLyDpqozmlLbor4TlrqHooajljZXmoKHpqowKICAgICAgYWNjZXB0YW5jZVJ1bGVzOiB7CiAgICAgICAgc2NvcmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor4TliIbkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgb3BpbmlvbjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIumqjOaUtuaEj+ingeS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBzdGF0dXM6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLpqozmlLbnu5PmnpzkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XQogICAgICB9LAogICAgICAvLyDor6bmg4XlvLnnqpcKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgaXNBY2NlcHRhbmNlOiBmYWxzZSwKICAgICAgLy8g5paH5Lu25YiX6KGoCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgLy8g5LiK5Lyg5aS06YOoCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCkKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wcm9qZWN0SWQ7CiAgICB0aGlzLnF1ZXJ5UGFyYW1zLnByb2plY3RJZCA9IHRoaXMucHJvamVjdElkOwogICAgdGhpcy5mb3JtLnByb2plY3RJZCA9IHRoaXMucHJvamVjdElkOwogICAgdGhpcy5nZXRQcm9qZWN0SW5mbygpOwogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bpobnnm67kv6Hmga8KICAgIGdldFByb2plY3RJbmZvOiBmdW5jdGlvbiBnZXRQcm9qZWN0SW5mbygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgKDAsIF9pbmZvLmdldEluZm8pKHRoaXMucHJvamVjdElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnByb2plY3RJbmZvID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6aqM5pS26K6w5b2V5YiX6KGoCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF9hY2NlcHRhbmNlLmxpc3RQcm9qZWN0QWNjZXB0YW5jZSkodGhpcy5wcm9qZWN0SWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmFjY2VwdGFuY2VMaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICBfdGhpczIudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDooajljZXmj5DkuqQKICAgIHN1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAoMCwgX2FjY2VwdGFuY2UuYWRkQWNjZXB0YW5jZSkoX3RoaXMzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzMy4kbW9kYWwubXNnU3VjY2Vzcygi5o+Q5Lqk5oiQ5YqfIik7CiAgICAgICAgICAgIF90aGlzMy5nZXRMaXN0KCk7CiAgICAgICAgICAgIC8vIOmHjee9ruihqOWNlQogICAgICAgICAgICBfdGhpczMuZm9ybSA9IHsKICAgICAgICAgICAgICBwcm9qZWN0SWQ6IF90aGlzMy5wcm9qZWN0SWQsCiAgICAgICAgICAgICAgYWNjZXB0YW5jZVRpdGxlOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgYWNjZXB0YW5jZUNvbnRlbnQ6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICBtYXRlcmlhbHNQYXRoOiB1bmRlZmluZWQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXMzLmZpbGVMaXN0ID0gW107CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOafpeeci+mqjOaUtuivpuaDhQogICAgaGFuZGxlVmlldzogZnVuY3Rpb24gaGFuZGxlVmlldyhyb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy5pc0FjY2VwdGFuY2UgPSBmYWxzZTsKICAgICAgdGhpcy50aXRsZSA9ICLpqozmlLbor6bmg4UiOwogICAgICAoMCwgX2FjY2VwdGFuY2UuZ2V0QWNjZXB0YW5jZSkocm93LmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC52aWV3Rm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/m+ihjOmqjOaUtgogICAgaGFuZGxlQWNjZXB0YW5jZTogZnVuY3Rpb24gaGFuZGxlQWNjZXB0YW5jZShyb3cpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgdGhpcy5pc0FjY2VwdGFuY2UgPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gIumhueebrumqjOaUtiI7CiAgICAgICgwLCBfYWNjZXB0YW5jZS5nZXRBY2NlcHRhbmNlKShyb3cuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM1LnZpZXdGb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczUuYWNjZXB0YW5jZUZvcm0uaWQgPSByb3cuaWQ7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaPkOS6pOmqjOaUtue7k+aenAogICAgc3VibWl0QWNjZXB0YW5jZTogZnVuY3Rpb24gc3VibWl0QWNjZXB0YW5jZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbImFjY2VwdGFuY2VGb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAoMCwgX2FjY2VwdGFuY2UuY29tcGxldGVBY2NlcHRhbmNlKShfdGhpczYuYWNjZXB0YW5jZUZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNi4kbW9kYWwubXNnU3VjY2Vzcygi6aqM5pS25a6M5oiQIik7CiAgICAgICAgICAgIF90aGlzNi5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNi5nZXRMaXN0KCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmHjee9ruihqOWNlQogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLnZpZXdGb3JtID0ge307CiAgICAgIHRoaXMuYWNjZXB0YW5jZUZvcm0gPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgc2NvcmU6IDUsCiAgICAgICAgb3BpbmlvbjogJycsCiAgICAgICAgc3RhdHVzOiAnMScKICAgICAgfTsKICAgICAgdGhpcy5pc0FjY2VwdGFuY2UgPSBmYWxzZTsKICAgICAgdGhpcy5yZXNldEZvcm0oImFjY2VwdGFuY2VGb3JtIik7CiAgICB9LAogICAgLy8g5paH5Lu25LiK5Lyg5oiQ5YqfCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZvcm0ubWF0ZXJpYWxzUGF0aCA9IHJlc3BvbnNlLnVybDsKICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5LiK5Lyg5oiQ5YqfIik7CiAgICB9LAogICAgLy8g5paH5Lu25Yig6ZmkCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZvcm0ubWF0ZXJpYWxzUGF0aCA9ICcnOwogICAgfSwKICAgIC8vIOaWh+S7tumihOiniAogICAgaGFuZGxlUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIHdpbmRvdy5vcGVuKGZpbGUudXJsKTsKICAgIH0sCiAgICAvLyDkuIrkvKDliY3mo4Dmn6UKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzTHQxME0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDEwOwogICAgICBpZiAoIWlzTHQxME0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDmlofku7blpKflsI/kuI3og73otoXov4cgMTBNQiEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g5Y+W5raI5pON5L2cCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["_acceptance","require","_info","_auth","_default","exports","default","name","dicts","data","loading","projectId","projectInfo","queryParams","pageNum","pageSize","undefined","acceptanceList","total","form","acceptanceTitle","acceptanceContent","materialsPath","viewForm","acceptanceForm","id","score","opinion","status","rules","required","message","trigger","acceptanceRules","open","title","isAcceptance","fileList","headers","Authorization","getToken","created","$route","params","getProjectInfo","getList","methods","_this","getInfo","then","response","_this2","listProjectAcceptance","rows","submitForm","_this3","$refs","validate","valid","addAcceptance","$modal","msgSuccess","handleView","row","_this4","reset","getAcceptance","handleAcceptance","_this5","submitAcceptance","_this6","completeAcceptance","resetForm","handleUploadSuccess","file","url","handleRemove","handlePreview","window","beforeUpload","isLt10M","size","$message","error","cancel"],"sources":["src/views/project/acceptance/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>项目验收申请</span>\n      </div>\n\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"项目名称\">\n          <el-input v-model=\"projectInfo.projectName\" disabled />\n        </el-form-item>\n        <el-form-item label=\"验收标题\" prop=\"acceptanceTitle\">\n          <el-input v-model=\"form.acceptanceTitle\" placeholder=\"请输入验收标题\" />\n        </el-form-item>\n        <el-form-item label=\"验收内容\" prop=\"acceptanceContent\">\n          <el-input type=\"textarea\" v-model=\"form.acceptanceContent\" :rows=\"4\" placeholder=\"请输入验收内容\" />\n        </el-form-item>\n        <el-form-item label=\"验收材料\">\n          <el-upload\n            class=\"upload-demo\"\n            ref=\"upload\"\n            action=\"/api/common/upload\"\n            :on-preview=\"handlePreview\"\n            :on-remove=\"handleRemove\"\n            :on-success=\"handleUploadSuccess\"\n            :file-list=\"fileList\"\n            :headers=\"headers\"\n            :before-upload=\"beforeUpload\"\n            multiple>\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n            <div slot=\"tip\" class=\"el-upload__tip\">可上传验收相关文件，单个文件不超过10MB</div>\n          </el-upload>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\">提交验收申请</el-button>\n          <el-button @click=\"cancel\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <!-- 验收记录列表 -->\n    <el-card class=\"box-card mt20\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>验收记录</span>\n      </div>\n\n      <el-table v-loading=\"loading\" :data=\"acceptanceList\">\n        <el-table-column label=\"验收编号\" align=\"center\" prop=\"acceptanceCode\" />\n        <el-table-column label=\"验收标题\" align=\"center\" prop=\"acceptanceTitle\" />\n        <el-table-column label=\"申请时间\" align=\"center\" prop=\"applyTime\" width=\"180\" />\n        <el-table-column label=\"验收时间\" align=\"center\" prop=\"acceptanceTime\" width=\"180\" />\n        <el-table-column label=\"验收人\" align=\"center\" prop=\"acceptanceUserName\" />\n        <el-table-column label=\"验收状态\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <dict-tag :options=\"dict.type.acceptance_status\" :value=\"scope.row.status\"/>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              icon=\"el-icon-view\"\n              @click=\"handleView(scope.row)\"\n            >查看</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              icon=\"el-icon-edit\"\n              @click=\"handleAcceptance(scope.row)\"\n              v-if=\"scope.row.status === '0' && checkPermission(['project:acceptance:approve'])\"\n            >验收</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"queryParams.pageNum\"\n        :limit.sync=\"queryParams.pageSize\"\n        @pagination=\"getList\"\n      />\n    </el-card>\n\n    <!-- 验收详情对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\" append-to-body>\n      <el-descriptions :column=\"2\" border>\n        <el-descriptions-item label=\"验收编号\">{{ viewForm.acceptanceCode }}</el-descriptions-item>\n        <el-descriptions-item label=\"验收标题\">{{ viewForm.acceptanceTitle }}</el-descriptions-item>\n        <el-descriptions-item label=\"申请时间\">{{ viewForm.applyTime }}</el-descriptions-item>\n        <el-descriptions-item label=\"验收状态\">\n          <dict-tag :options=\"dict.type.acceptance_status\" :value=\"viewForm.status\"/>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"验收内容\" :span=\"2\">{{ viewForm.acceptanceContent }}</el-descriptions-item>\n        <el-descriptions-item label=\"验收材料\" :span=\"2\">\n          <el-link\n            v-if=\"viewForm.materialsPath\"\n            type=\"primary\"\n            :href=\"viewForm.materialsPath\"\n            target=\"_blank\"\n          >下载材料</el-link>\n          <span v-else>无</span>\n        </el-descriptions-item>\n        <el-descriptions-item label=\"验收评分\" v-if=\"viewForm.status !== '0'\">{{ viewForm.score }}</el-descriptions-item>\n        <el-descriptions-item label=\"验收人\" v-if=\"viewForm.status !== '0'\">{{ viewForm.acceptanceUserName }}</el-descriptions-item>\n        <el-descriptions-item label=\"验收意见\" :span=\"2\" v-if=\"viewForm.status !== '0'\">{{ viewForm.opinion }}</el-descriptions-item>\n      </el-descriptions>\n\n      <div v-if=\"isAcceptance\" class=\"mt20\">\n        <el-divider content-position=\"center\">验收结果</el-divider>\n        <el-form ref=\"acceptanceForm\" :model=\"acceptanceForm\" :rules=\"acceptanceRules\" label-width=\"100px\">\n          <el-form-item label=\"验收评分\" prop=\"score\">\n            <el-rate\n              v-model=\"acceptanceForm.score\"\n              :max=\"10\"\n              show-score\n              :colors=\"colors\"\n            ></el-rate>\n          </el-form-item>\n          <el-form-item label=\"验收意见\" prop=\"opinion\">\n            <el-input\n              type=\"textarea\"\n              v-model=\"acceptanceForm.opinion\"\n              :rows=\"3\"\n              placeholder=\"请输入验收意见\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"验收结果\" prop=\"status\">\n            <el-radio-group v-model=\"acceptanceForm.status\">\n              <el-radio label=\"1\">通过</el-radio>\n              <el-radio label=\"2\">不通过</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-form>\n      </div>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"open = false\">关 闭</el-button>\n        <el-button type=\"primary\" @click=\"submitAcceptance\" v-if=\"isAcceptance\">提 交</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// research-ui/src/views/project/acceptance/index.js\nimport { listProjectAcceptance, getAcceptance, addAcceptance, completeAcceptance } from \"@/api/project/acceptance\";\nimport { getInfo } from \"@/api/project/info\";\nimport { getToken } from \"@/utils/auth\";\n\nexport default {\n  name: \"ProjectAcceptance\",\n  dicts: ['acceptance_status'],\n  data() {\n    return {\n      // 遮罩层\n      loading: true,\n      // 项目ID\n      projectId: null,\n      // 项目信息\n      projectInfo: {},\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        projectId: undefined,\n      },\n      // 验收记录列表\n      acceptanceList: [],\n      // 总条数\n      total: 0,\n      // 验收表单\n      form: {\n        projectId: undefined,\n        acceptanceTitle: undefined,\n        acceptanceContent: undefined,\n        materialsPath: undefined,\n      },\n      // 验收详情表单\n      viewForm: {},\n      // 验收评审表单\n      acceptanceForm: {\n        id: null,\n        score: 5,\n        opinion: '',\n        status: '1'\n      },\n      // 表单校验\n      rules: {\n        acceptanceTitle: [\n          { required: true, message: \"验收标题不能为空\", trigger: \"blur\" }\n        ],\n        acceptanceContent: [\n          { required: true, message: \"验收内容不能为空\", trigger: \"blur\" }\n        ]\n      },\n      // 验收评审表单校验\n      acceptanceRules: {\n        score: [\n          { required: true, message: \"评分不能为空\", trigger: \"blur\" }\n        ],\n        opinion: [\n          { required: true, message: \"验收意见不能为空\", trigger: \"blur\" }\n        ],\n        status: [\n          { required: true, message: \"验收结果不能为空\", trigger: \"change\" }\n        ]\n      },\n      // 详情弹窗\n      open: false,\n      title: \"\",\n      isAcceptance: false,\n      // 文件列表\n      fileList: [],\n      // 上传头部\n      headers: {\n        Authorization: 'Bearer ' + getToken()\n      }\n    };\n  },\n  created() {\n    this.projectId = this.$route.params.projectId;\n    this.queryParams.projectId = this.projectId;\n    this.form.projectId = this.projectId;\n    this.getProjectInfo();\n    this.getList();\n  },\n  methods: {\n    // 获取项目信息\n    getProjectInfo() {\n      getInfo(this.projectId).then(response => {\n        this.projectInfo = response.data;\n      });\n    },\n    // 获取验收记录列表\n    getList() {\n      this.loading = true;\n      listProjectAcceptance(this.projectId).then(response => {\n        this.acceptanceList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n    },\n    // 表单提交\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          addAcceptance(this.form).then(response => {\n            this.$modal.msgSuccess(\"提交成功\");\n            this.getList();\n            // 重置表单\n            this.form = {\n              projectId: this.projectId,\n              acceptanceTitle: undefined,\n              acceptanceContent: undefined,\n              materialsPath: undefined,\n            };\n            this.fileList = [];\n          });\n        }\n      });\n    },\n    // 查看验收详情\n    handleView(row) {\n      this.reset();\n      this.open = true;\n      this.isAcceptance = false;\n      this.title = \"验收详情\";\n\n      getAcceptance(row.id).then(response => {\n        this.viewForm = response.data;\n      });\n    },\n    // 进行验收\n    handleAcceptance(row) {\n      this.reset();\n      this.open = true;\n      this.isAcceptance = true;\n      this.title = \"项目验收\";\n\n      getAcceptance(row.id).then(response => {\n        this.viewForm = response.data;\n        this.acceptanceForm.id = row.id;\n      });\n    },\n    // 提交验收结果\n    submitAcceptance() {\n      this.$refs[\"acceptanceForm\"].validate(valid => {\n        if (valid) {\n          completeAcceptance(this.acceptanceForm).then(response => {\n            this.$modal.msgSuccess(\"验收完成\");\n            this.open = false;\n            this.getList();\n          });\n        }\n      });\n    },\n    // 重置表单\n    reset() {\n      this.viewForm = {};\n      this.acceptanceForm = {\n        id: null,\n        score: 5,\n        opinion: '',\n        status: '1'\n      };\n      this.isAcceptance = false;\n      this.resetForm(\"acceptanceForm\");\n    },\n    // 文件上传成功\n    handleUploadSuccess(response, file, fileList) {\n      this.form.materialsPath = response.url;\n      this.$modal.msgSuccess(\"上传成功\");\n    },\n    // 文件删除\n    handleRemove(file, fileList) {\n      this.form.materialsPath = '';\n    },\n    // 文件预览\n    handlePreview(file) {\n      window.open(file.url);\n    },\n    // 上传前检查\n    beforeUpload(file) {\n      const isLt10M = file.size / 1024 / 1024 < 10;\n      if (!isLt10M) {\n        this.$message.error('上传文件大小不能超过 10MB!');\n        return false;\n      }\n      return true;\n    },\n    // 取消操作\n    cancel() {\n      this.open = false;\n      this.reset();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.mt20 {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}